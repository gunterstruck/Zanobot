<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0A1929">
    <meta name="description" content="Zanobot - AI Assistant für akustische Maschinenüberwachung">

    <title>Zanobot - AI Assistant</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">

    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png">
    <link rel="apple-touch-icon" href="/icons/icon-512.png">

    <!-- Styles -->
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <!-- Main Container -->
    <div class="container">
        <!-- Container 1: Header & Welcome Section -->
        <section class="main-container">
            <div class="container-content">
                <!-- Header -->
                <div class="header-inline">
                    <div class="logo-section">
                        <div class="logo">
                            <svg width="48" height="48" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="50" cy="45" r="30" stroke="var(--primary-color)" stroke-width="2.5" fill="none"/>
                                <circle cx="45" cy="35" r="3" fill="var(--primary-color)"/>
                                <circle cx="55" cy="35" r="3" fill="var(--primary-color)"/>
                                <circle cx="50" cy="45" r="3" fill="var(--primary-color)"/>
                                <circle cx="45" cy="52" r="3" fill="var(--primary-color)"/>
                                <circle cx="55" cy="52" r="3" fill="var(--primary-color)"/>
                                <line x1="45" y1="35" x2="50" y2="45" stroke="var(--primary-color)" stroke-width="1.5"/>
                                <line x1="55" y1="35" x2="50" y2="45" stroke="var(--primary-color)" stroke-width="1.5"/>
                                <line x1="50" y1="45" x2="45" y2="52" stroke="var(--primary-color)" stroke-width="1.5"/>
                                <line x1="50" y1="45" x2="55" y2="52" stroke="var(--primary-color)" stroke-width="1.5"/>
                                <path d="M 15 30 Q 12 35 15 40" stroke="var(--primary-color)" stroke-width="2" fill="none"/>
                                <path d="M 10 25 Q 5 35 10 45" stroke="var(--primary-color)" stroke-width="2" fill="none"/>
                            </svg>
                        </div>
                        <div class="branding">
                            <h1 class="brand-title">ZANOBOT</h1>
                            <p class="brand-subtitle">AI ASSISTANT</p>
                        </div>
                    </div>

                    <!-- Theme Switcher -->
                    <div class="theme-switcher">
                        <button class="theme-btn" data-theme="dark" title="Dunkler Modus">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                            </svg>
                        </button>
                        <button class="theme-btn" data-theme="light" title="Heller Modus">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="5"/>
                                <line x1="12" y1="1" x2="12" y2="3"/>
                                <line x1="12" y1="21" x2="12" y2="23"/>
                            </svg>
                        </button>
                        <button class="theme-btn active" data-theme="brand" title="Zanobot Design">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="header-divider"></div>

                <!-- Welcome Section -->
                <div class="welcome-section-inline">
                    <h2 class="welcome-title">Willkommen, <span id="user-name">Benutzer</span></h2>
                    <p class="welcome-subtitle">Maschinenüberwachung</p>
                </div>
            </div>
        </section>

        <!-- Container 2: Maschine auswählen (PHASE 1) -->
        <section class="main-container collapsible">
            <div class="main-header section-header" data-target="select-machine-content">
                <div class="header-with-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v10M1 12h6m6 0h10"/>
                    </svg>
                    <h3 class="container-title">Maschine auswählen</h3>
                </div>
                <svg class="collapse-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"/>
                </svg>
            </div>
            <div id="select-machine-content" class="collapsible-content">
                <div class="container-content">
                    <div class="machine-selection-option">
                        <div class="option-header">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                                <rect x="3" y="3" width="8" height="8" rx="1"/>
                                <rect x="13" y="3" width="8" height="8" rx="1"/>
                                <rect x="3" y="13" width="8" height="8" rx="1"/>
                            </svg>
                            <h5 class="option-title">QR-Code scannen</h5>
                        </div>
                        <button class="action-btn secondary-btn" id="scan-btn">Scannen</button>
                    </div>

                    <div class="option-divider"><span>oder</span></div>

                    <div class="machine-selection-option">
                        <div class="option-header">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                            </svg>
                            <h5 class="option-title">Manuell anlegen</h5>
                        </div>
                        <div class="input-group">
                            <label for="machine-name-input">Maschinenname</label>
                            <input type="text" id="machine-name-input" class="machine-input" placeholder="z.B. Zanobot 123" />
                        </div>
                        <div class="input-group">
                            <label for="machine-id-input">Maschinen-ID (optional)</label>
                            <input type="text" id="machine-id-input" class="machine-input" placeholder="z.B. 1GB4-636A0-Ba1" />
                        </div>
                        <button class="action-btn" id="create-machine-btn">Speichern</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Container 3: Referenz aufnehmen (PHASE 2) -->
        <section class="main-container collapsible">
            <div class="main-header section-header" data-target="record-reference-content">
                <div class="header-with-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                        <rect x="9" y="2" width="6" height="12" rx="3"/>
                        <path d="M5 10v2a7 7 0 0 0 14 0v-2"/>
                    </svg>
                    <h3 class="container-title">Referenz aufnehmen</h3>
                </div>
                <svg class="collapse-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"/>
                </svg>
            </div>
            <div id="record-reference-content" class="collapsible-content" style="display: none;">
                <div class="container-content">
                    <p class="sub-description">10-Sekunden Referenzaufnahme</p>
                    <button class="action-btn" id="record-btn">Aufnehmen</button>
                </div>
            </div>
        </section>

        <!-- Container 4: Diagnose starten (PHASE 3) -->
        <section class="main-container collapsible">
            <div class="main-header section-header" data-target="run-diagnosis-content">
                <div class="header-with-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2">
                        <path d="M3 3v18h18"/>
                        <path d="M18 17l-5-5-4 4-6-6"/>
                    </svg>
                    <h3 class="container-title">Diagnose starten</h3>
                </div>
                <svg class="collapse-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"/>
                </svg>
            </div>
            <div id="run-diagnosis-content" class="collapsible-content" style="display: none;">
                <div class="container-content">
                    <p class="sub-description">Live-Analyse durchführen</p>
                    <button class="action-btn" id="diagnose-btn">Analysieren</button>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal for Recording -->
    <div id="recording-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Aufnahme läuft...</h3>
            </div>
            <div class="modal-body">
                <canvas id="waveform-canvas" width="600" height="200"></canvas>
                <p class="recording-timer" id="recording-timer">00:00</p>
            </div>
            <div class="modal-actions">
                <button class="modal-btn btn-secondary" id="stop-recording-btn">Stop</button>
            </div>
        </div>
    </div>

    <!-- Modal for Diagnosis Results -->
    <div id="diagnosis-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Diagnoseergebnisse</h3>
                <button class="close-modal-btn" id="close-diagnosis-modal">✕</button>
            </div>
            <div class="modal-body">
                <div class="result-card">
                    <p><strong>Maschine:</strong> <span id="machine-barcode">-</span></p>
                    <canvas id="health-gauge-canvas" width="300" height="300"></canvas>
                    <p class="result-status" id="result-status">-</p>
                    <p>Health Score: <span id="result-confidence">-</span>%</p>
                    <p class="analysis-hint" id="analysis-hint">-</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App Script (TypeScript compiled by Vite) -->
    <script type="module" src="/src/main.ts"></script>
</body>
</html>
