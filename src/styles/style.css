/* ===================================
   ZANOBOT AI ASSISTANT - MAIN STYLES
   Industrial High-End Design
   =================================== */

/* ===================================
   CSS VARIABLES & THEME SYSTEM
   =================================== */
:root {
    /* Test UI Scale Factor (1.0 = 100%, 0.75 = 75%) */
    /* Used for scaling the Simple Mode Test Screen on small devices */
    --test-ui-scale: 1;

    /* Spacing (Theme-Independent) */
    --spacing-xs: 0.5rem;
    --spacing-sm: 1rem;
    --spacing-md: 1.5rem;
    --spacing-lg: 2rem;
    --spacing-xl: 3rem;

    /* Layout Spacing System (Deliberate Visual Rhythm)
       These control the vertical flow on the start screen:
       - Cards are grouped tightly together (primary zone)
       - Large gap separates cards from footer (hierarchy break)
       - Footer sits "grounded" with breathing room below */
    --space-card-gap: 1.5rem;        /* 24px - between action cards */
    --space-section-gap: 3rem;       /* 48px - after cards, before footer */
    --space-footer-bottom: 1.5rem;   /* 24px - below footer to viewport edge */

    /* Border Radius (Theme-Independent) */
    --radius-xs: 4px;
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 24px;
    --radius-pill: 9999px;

    /* Font Sizes (Responsive Scale) */
    --font-xs: clamp(0.65rem, 1.5vw, 0.75rem);
    --font-sm: clamp(0.8rem, 1.8vw, 0.875rem);
    --font-md: clamp(0.9rem, 2vw, 1rem);
    --font-lg: clamp(1rem, 2.2vw, 1.125rem);
    --font-xl: clamp(1.25rem, 2.5vw, 1.5rem);
    --font-2xl: clamp(1.5rem, 3vw, 1.75rem);

    /* Layout Widths (Consistent across all elements) */
    --content-max-width: 400px;

    /* Typography (Theme-Independent) */
    --font-primary: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    --font-mono: "SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace;

    /* Button System (Unified) */
    --btn-font-weight: 600;
    --btn-letter-spacing: 0.05em;
    --btn-transition: all 0.2s ease;
    --btn-padding-sm: 0.625rem 1.25rem;
    --btn-padding-md: 0.75rem 1.5rem;
    --btn-padding-lg: 1rem 2rem;
    --btn-font-sm: 0.875rem;
    --btn-font-md: 1rem;
    --btn-font-lg: 1.125rem;

    /* Hover Effects (Unified) */
    --hover-lift: translateY(-2px);
    --hover-scale: scale(1.02);
    --active-press: scale(0.98);

    /* Z-Index Scale */
    --z-dropdown: 100;
    --z-sticky: 200;
    --z-fixed: 500;
    --z-modal-backdrop: 1000;
    --z-modal: 1100;
    --z-popover: 1200;
    --z-toast: 2000;

    /* Default Theme: Brand (Zanobot Original) */
    --primary-color: #00D4FF;
    --primary-hover: #00B8E6;
    --secondary-color: #40E0D0;
    --accent-color: #00FFC6;

    --bg-primary: #0A1929;
    --bg-secondary: #0D1F31;
    --bg-tertiary: #112840;
    --bg-card: rgba(17, 40, 64, 0.6);
    --bg-modal: rgba(10, 25, 41, 0.95);

    --text-primary: #FFFFFF;
    --text-secondary: #B0BEC5;
    --text-muted: #78909C;

    --status-healthy: #00E676;
    --status-warning: #FFB74D;
    --status-error: #FF5252;
    --status-uncertain: #FFA726;

    --border-color: rgba(0, 212, 255, 0.2);
    --divider-color: rgba(255, 255, 255, 0.1);

    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
    --glow-primary: 0 0 20px rgba(0, 212, 255, 0.3);
    --glow-strong: 0 0 30px rgba(0, 212, 255, 0.5);

    /* Footer Surface - deeper shade for visual "floor" */
    --footer-bg: rgba(7, 18, 33, 0.95);
    --footer-text: #ffffff;
    --footer-border: rgba(0, 212, 255, 0.15);

    /* Visualizer Colors (Theme-Aware) */
    --viz-bg: #0a0a0a;
    --viz-grid: rgba(255, 255, 255, 0.05);
    --viz-primary: rgba(59, 130, 246, 0.8);
    --viz-fill-top: rgba(59, 130, 246, 0.3);
    --viz-fill-bottom: rgba(59, 130, 246, 0.05);
    --viz-text: rgba(255, 255, 255, 0.4);

    /* Primary Card Tokens (for "Diagnose starten" CTA emphasis) */
    --primary-card-accent: var(--primary-color);
    --primary-card-border: 2px solid var(--primary-color);
    --primary-card-glow: 0 0 16px rgba(0, 212, 255, 0.15);
    --primary-card-shadow: 0 6px 24px rgba(0, 0, 0, 0.45);
    --primary-card-hover-glow: 0 0 24px rgba(0, 212, 255, 0.25);
    --primary-card-icon-filter: drop-shadow(0 0 8px rgba(0, 212, 255, 0.4));
    --primary-card-badge-bg: rgba(0, 212, 255, 0.12);
    --primary-card-badge-border: rgba(0, 212, 255, 0.25);
}

/* ===================================
   RESPONSIVE SPACING SYSTEM
   Deliberate vertical rhythm for different screen sizes
   =================================== */

/* Mobile (compact but clear hierarchy) */
@media (max-width: 480px) {
    :root {
        --space-card-gap: 1.25rem;       /* 20px - slightly tighter on mobile */
        --space-section-gap: 2.5rem;     /* 40px - still clear hierarchy break */
        --space-footer-bottom: 1.25rem;  /* 20px - moderate bottom breathing room */
    }
}

/* Tablet is default (481px - 900px) - uses :root values */

/* Desktop (generous spacing) */
@media (min-width: 901px) {
    :root {
        --space-card-gap: 1.75rem;       /* 28px - more breathing room */
        --space-section-gap: 3.5rem;     /* 56px - generous hierarchy break */
        --space-footer-bottom: 2rem;     /* 32px - comfortable bottom margin */
    }
}

/* ===================================
   THEME: NEON INDUSTRIAL (Cyberpunk)
   Vibe: Dark machinery, OLED display, futuristic high-tech
   =================================== */
[data-theme="neon"] {
    /* Core Colors */
    --primary-color: #00f3ff;         /* Neon Cyan/Electric Blue */
    --primary-hover: #00d4e6;
    --secondary-color: #00b8ff;
    --accent-color: #ff8800;          /* Neon Orange - für Warnings & Record */

    /* Backgrounds - Ultra Dark */
    --bg-primary: #0f172a;            /* Very dark slate */
    --bg-secondary: #1e293b;
    --bg-tertiary: #334155;
    --bg-card: rgba(30, 41, 59, 0.6);
    --bg-modal: rgba(15, 23, 42, 0.98);

    /* Text */
    --text-primary: #f8fafc;          /* Almost white */
    --text-secondary: #cbd5e1;
    --text-muted: #94a3b8;

    /* Status Colors */
    --status-healthy: #00ff88;        /* Neon green */
    --status-warning: #ffa500;        /* Neon orange */
    --status-error: #ff3366;          /* Neon red/pink */
    --status-uncertain: #ffaa00;

    /* Borders & Effects */
    --border-color: rgba(0, 243, 255, 0.3);
    --divider-color: rgba(248, 250, 252, 0.1);

    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
    --glow-primary: 0 0 25px rgba(0, 243, 255, 0.4);
    --glow-strong: 0 0 40px rgba(0, 243, 255, 0.6);

    /* Footer Surface - darker than content cards for visual "floor" */
    --footer-bg: rgba(5, 11, 20, 0.95);
    --footer-text: #f8fafc;
    --footer-border: rgba(0, 243, 255, 0.2);

    /* Visualizer Colors */
    --viz-bg: #000000;
    --viz-grid: rgba(0, 243, 255, 0.08);
    --viz-primary: rgba(0, 243, 255, 0.9);
    --viz-fill-top: rgba(0, 243, 255, 0.4);
    --viz-fill-bottom: rgba(0, 243, 255, 0.08);
    --viz-text: rgba(0, 243, 255, 0.5);

    /* Primary Card Tokens - Neon Cyberpunk */
    --primary-card-accent: #00f3ff;
    --primary-card-border: 2px solid rgba(0, 243, 255, 0.6);
    --primary-card-glow: 0 0 20px rgba(0, 243, 255, 0.2);
    --primary-card-shadow: 0 6px 28px rgba(0, 0, 0, 0.55);
    --primary-card-hover-glow: 0 0 32px rgba(0, 243, 255, 0.35);
    --primary-card-icon-filter: drop-shadow(0 0 10px rgba(0, 243, 255, 0.5));
    --primary-card-badge-bg: rgba(0, 243, 255, 0.1);
    --primary-card-badge-border: rgba(0, 243, 255, 0.3);
}

/* ===================================
   THEME: DAYLIGHT (High Contrast)
   Vibe: Construction site in sunlight, technical datasheet
   =================================== */
[data-theme="light"] {
    /* Core Colors */
    --primary-color: #0f172a;         /* Dark engineer blue (high contrast) */
    --primary-hover: #1e293b;
    --secondary-color: #334155;
    --accent-color: #ea580c;          /* Signal orange */

    /* Backgrounds - Light */
    --bg-primary: #ffffff;
    --bg-secondary: #f8fafc;
    --bg-tertiary: #f1f5f9;
    --bg-card: rgba(255, 255, 255, 0.95);
    --bg-modal: rgba(255, 255, 255, 0.98);

    /* Text - Dark for contrast */
    --text-primary: #0f172a;
    --text-secondary: #475569;
    --text-muted: #94a3b8;

    /* Status Colors */
    --status-healthy: #16a34a;        /* Darker green for readability */
    --status-warning: #f59e0b;
    --status-error: #dc2626;
    --status-uncertain: #f97316;

    /* Borders & Effects */
    --border-color: rgba(15, 23, 42, 0.15);
    --divider-color: rgba(0, 0, 0, 0.08);

    /* Enhanced shadows for better depth perception in light mode */
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.06);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12), 0 2px 6px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16), 0 4px 12px rgba(0, 0, 0, 0.1);
    --glow-primary: 0 0 20px rgba(15, 23, 42, 0.12), 0 0 8px rgba(15, 23, 42, 0.08);
    --glow-strong: 0 0 30px rgba(15, 23, 42, 0.18), 0 0 12px rgba(15, 23, 42, 0.12);

    /* Footer Surface - light grey to distinguish from white content cards */
    --footer-bg: #e2e8f0;
    --footer-text: #0f172a;
    --footer-border: rgba(15, 23, 42, 0.15);

    /* Visualizer Colors */
    --viz-bg: #f8fafc;
    --viz-grid: rgba(15, 23, 42, 0.1);
    --viz-primary: rgba(15, 23, 42, 0.9);
    --viz-fill-top: rgba(15, 23, 42, 0.3);
    --viz-fill-bottom: rgba(15, 23, 42, 0.05);
    --viz-text: rgba(15, 23, 42, 0.5);

    /* Primary Card Tokens - Daylight High Contrast */
    --primary-card-accent: #0f172a;
    --primary-card-border: 2px solid rgba(15, 23, 42, 0.35);
    --primary-card-glow: 0 0 0 1px rgba(15, 23, 42, 0.08);
    --primary-card-shadow: 0 6px 24px rgba(0, 0, 0, 0.14), 0 3px 10px rgba(0, 0, 0, 0.08);
    --primary-card-hover-glow: 0 0 0 2px rgba(15, 23, 42, 0.12);
    --primary-card-icon-filter: drop-shadow(0 1px 2px rgba(15, 23, 42, 0.2));
    --primary-card-badge-bg: rgba(15, 23, 42, 0.06);
    --primary-card-badge-border: rgba(15, 23, 42, 0.15);
}

/* Light theme surface tuning for better readability */
[data-theme="light"] .sub-container {
    background: var(--bg-primary);
    border-color: rgba(15, 23, 42, 0.12);
    box-shadow: var(--shadow-sm);
}

[data-theme="light"] .machine-selection-option {
    background: var(--bg-primary);
    border-color: rgba(15, 23, 42, 0.12);
    box-shadow: var(--shadow-sm);
}

[data-theme="light"] .machine-input {
    background: #ffffff;
    border-color: rgba(15, 23, 42, 0.2);
    color: var(--text-primary);
}

[data-theme="light"] .machine-input:focus {
    background: #ffffff;
    box-shadow: 0 0 0 3px rgba(15, 23, 42, 0.08);
}

[data-theme="light"] .option-divider span {
    background: var(--bg-primary);
    color: var(--text-secondary);
}

/* Light theme primary card adjustments */
[data-theme="light"] .main-container[data-variant="primary"] .main-header:hover {
    background: rgba(15, 23, 42, 0.04);
}

[data-theme="light"] .primary-card-badge {
    color: var(--text-primary);
}

/* ===================================
   THEME: BRAND (Zanobot Original)
   Vibe: Light, friendly, trustworthy - matching the colorful banner
   "KI, der man vertraut – freundlich, klar, leicht."
   =================================== */
[data-theme="brand"] {
    /* Core Colors - Friendly Cyan/Mint from Banner */
    --primary-color: #00B8D9;           /* Friendly cyan */
    --primary-hover: #00A0C0;
    --secondary-color: #4DD0C0;         /* Soft mint-cyan */
    --accent-color: #5ECFB8;            /* Gentle mint */

    /* Backgrounds - Light, airy, almost white */
    --bg-primary: #f7fafc;              /* Very light, almost white */
    --bg-secondary: #eef5fa;            /* Very light blue-grey */
    --bg-tertiary: #e3edf5;             /* Subtle blue tint */
    --bg-card: rgba(255, 255, 255, 0.98);  /* White cards */
    --bg-modal: rgba(255, 255, 255, 0.98);

    /* Text - Dark anthracite, not pure black */
    --text-primary: #2D3E50;            /* Dark anthracite */
    --text-secondary: #5A6B7A;          /* Medium grey-blue */
    --text-muted: #8A9AAA;              /* Light grey */

    /* Status Colors - Friendly, clear tones */
    --status-healthy: #10B981;          /* Friendly green */
    --status-warning: #F59E0B;          /* Warm amber */
    --status-error: #EF4444;            /* Clear red */
    --status-uncertain: #F97316;        /* Warm orange */

    /* Borders & Effects - Soft, subtle */
    --border-color: rgba(0, 184, 217, 0.18);
    --divider-color: rgba(0, 0, 0, 0.06);

    /* Soft shadows - gentle depth */
    --shadow-sm: 0 1px 3px rgba(0, 60, 80, 0.04), 0 1px 2px rgba(0, 60, 80, 0.02);
    --shadow-md: 0 4px 12px rgba(0, 60, 80, 0.06), 0 2px 4px rgba(0, 60, 80, 0.03);
    --shadow-lg: 0 8px 24px rgba(0, 60, 80, 0.08), 0 4px 8px rgba(0, 60, 80, 0.04);
    --glow-primary: 0 0 16px rgba(0, 184, 217, 0.12);
    --glow-strong: 0 0 24px rgba(0, 184, 217, 0.18);

    /* Footer Surface - subtle light distinction */
    --footer-bg: #eef5fa;
    --footer-text: #2D3E50;
    --footer-border: rgba(0, 184, 217, 0.12);

    /* Visualizer Colors - Light mode friendly */
    --viz-bg: #f7fafc;
    --viz-grid: rgba(0, 184, 217, 0.1);
    --viz-primary: rgba(0, 184, 217, 0.85);
    --viz-fill-top: rgba(0, 184, 217, 0.25);
    --viz-fill-bottom: rgba(0, 184, 217, 0.05);
    --viz-text: rgba(0, 140, 170, 0.6);

    /* Primary Card Tokens - Light, highlighted but not dark */
    --primary-card-accent: #00B8D9;
    --primary-card-border: 2px solid rgba(0, 184, 217, 0.35);
    --primary-card-glow: 0 0 0 1px rgba(0, 184, 217, 0.12), 0 0 16px rgba(0, 184, 217, 0.1);
    --primary-card-shadow: 0 6px 20px rgba(0, 60, 80, 0.1), 0 3px 8px rgba(0, 60, 80, 0.05);
    --primary-card-hover-glow: 0 0 24px rgba(0, 184, 217, 0.18);
    --primary-card-icon-filter: drop-shadow(0 0 6px rgba(0, 184, 217, 0.35));
    --primary-card-badge-bg: rgba(0, 184, 217, 0.08);
    --primary-card-badge-border: rgba(0, 184, 217, 0.2);
}

/* Brand Theme: Light surface tuning for better readability */
[data-theme="brand"] .sub-container {
    background: var(--bg-primary);
    border-color: rgba(0, 184, 217, 0.12);
    box-shadow: var(--shadow-sm);
}

[data-theme="brand"] .machine-selection-option {
    background: var(--bg-primary);
    border-color: rgba(0, 184, 217, 0.12);
    box-shadow: var(--shadow-sm);
}

[data-theme="brand"] .machine-input {
    background: #ffffff;
    border-color: rgba(0, 184, 217, 0.2);
    color: var(--text-primary);
}

[data-theme="brand"] .machine-input:focus {
    background: #ffffff;
    box-shadow: 0 0 0 3px rgba(0, 184, 217, 0.1);
}

[data-theme="brand"] .option-divider span {
    background: var(--bg-primary);
    color: var(--text-secondary);
}

/* Brand theme primary card adjustments */
[data-theme="brand"] .main-container[data-variant="primary"] .main-header:hover {
    background: rgba(0, 184, 217, 0.04);
}

[data-theme="brand"] .primary-card-badge {
    color: var(--text-primary);
}

/* ===================================
   THEME: FOCUS (Diagnose-first)
   Vibe: Bright, friendly, optimistic, calm - Steve Jobs principle
   "One primary action. Everything else supports it."
   =================================== */
[data-theme="focus"] {
    /* Core Colors - Warm, inviting, professional */
    --primary-color: #0891b2;         /* Warm teal - friendly yet professional */
    --primary-hover: #0e7490;
    --secondary-color: #06b6d4;
    --accent-color: #f59e0b;          /* Warm amber - positive, optimistic */

    /* Backgrounds - Light, airy, off-white */
    --bg-primary: #fafbfc;            /* Warm off-white */
    --bg-secondary: #f0f4f8;          /* Very light blue-grey */
    --bg-tertiary: #e2e8f0;
    --bg-card: rgba(255, 255, 255, 0.95);
    --bg-modal: rgba(255, 255, 255, 0.98);

    /* Text - Soft dark for readability without harshness */
    --text-primary: #1e293b;          /* Soft dark blue-grey */
    --text-secondary: #475569;
    --text-muted: #94a3b8;

    /* Status Colors - Friendly, optimistic tones */
    --status-healthy: #10b981;        /* Friendly green */
    --status-warning: #f59e0b;        /* Warm amber */
    --status-error: #ef4444;          /* Soft red */
    --status-uncertain: #f97316;      /* Warm orange */

    /* Borders & Effects - Soft, subtle */
    --border-color: rgba(8, 145, 178, 0.15);
    --divider-color: rgba(0, 0, 0, 0.06);

    /* Soft shadows - gentle depth without harshness */
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.03);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.06), 0 2px 4px rgba(0, 0, 0, 0.04);
    --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.08), 0 4px 8px rgba(0, 0, 0, 0.05);
    --glow-primary: 0 0 16px rgba(8, 145, 178, 0.12);
    --glow-strong: 0 0 24px rgba(8, 145, 178, 0.18);

    /* Footer Surface - subtle distinction */
    --footer-bg: #f0f4f8;
    --footer-text: #1e293b;
    --footer-border: rgba(8, 145, 178, 0.1);

    /* Visualizer Colors - Light mode friendly */
    --viz-bg: #fafbfc;
    --viz-grid: rgba(8, 145, 178, 0.08);
    --viz-primary: rgba(8, 145, 178, 0.85);
    --viz-fill-top: rgba(8, 145, 178, 0.25);
    --viz-fill-bottom: rgba(8, 145, 178, 0.05);
    --viz-text: rgba(8, 145, 178, 0.5);

    /* Focus Theme Specific: Hierarchy Variables */
    --focus-primary-scale: 1;         /* Diagnose card: full prominence */
    --focus-secondary-scale: 0.92;    /* Supporting cards: slightly smaller */
    --focus-secondary-width: 65%;     /* Supporting cards: narrower width (65-70%) */

    /* Focus Theme: Enhanced Primary Card Styling */
    --focus-primary-border: 2px solid rgba(8, 145, 178, 0.6);
    --focus-primary-shadow: 0 6px 20px rgba(8, 145, 178, 0.12), 0 3px 8px rgba(0, 0, 0, 0.06);
    --focus-primary-glow: 0 0 0 1px rgba(8, 145, 178, 0.15), 0 0 20px rgba(8, 145, 178, 0.08);

    /* Focus Theme: Subtle Secondary Card Styling */
    --focus-secondary-border: 1px solid rgba(148, 163, 184, 0.25);
    --focus-secondary-left-accent: 2px solid rgba(148, 163, 184, 0.4);
}

/* Focus Theme: Light surface tuning for better readability */
[data-theme="focus"] .sub-container {
    background: var(--bg-primary);
    border-color: rgba(8, 145, 178, 0.1);
    box-shadow: var(--shadow-sm);
}

[data-theme="focus"] .machine-selection-option {
    background: var(--bg-primary);
    border-color: rgba(8, 145, 178, 0.1);
    box-shadow: var(--shadow-sm);
}

[data-theme="focus"] .machine-input {
    background: #ffffff;
    border-color: rgba(8, 145, 178, 0.2);
    color: var(--text-primary);
}

[data-theme="focus"] .machine-input:focus {
    background: #ffffff;
    box-shadow: 0 0 0 3px rgba(8, 145, 178, 0.1);
}

[data-theme="focus"] .option-divider span {
    background: var(--bg-primary);
    color: var(--text-secondary);
}

/* ===================================
   FOCUS THEME: LAYOUT HIERARCHY
   Steve Jobs Principle: "One primary action"
   Diagnose = Primary (prominent, full-width, top)
   Machine Select & Reference = Secondary (smaller, right-aligned)
   =================================== */

/* Focus Theme: Reorder containers - Diagnose FIRST */
[data-theme="focus"] .main-actions {
    /* Flex container for reordering */
    display: flex;
    flex-direction: column;
    align-items: flex-end; /* Right-align children by default */
}

/* Focus Theme: Primary Action - Zustand prüfen (full width, dominant) */
[data-theme="focus"] .main-actions > .main-container:nth-child(3) {
    /* Diagnose is the 3rd child in HTML, but visually FIRST */
    order: -1;
    width: 100%;
    /* Enhanced visual prominence - unmistakably the primary action */
    border: var(--focus-primary-border);
    box-shadow: var(--focus-primary-shadow), var(--focus-primary-glow);
    background: rgba(255, 255, 255, 0.99);
    /* Subtle scale increase for dominance */
    transform: scale(1.01);
    transform-origin: center top;
    /* Clear focus indicator */
    outline: none;
    position: relative;
    z-index: 2;
}

[data-theme="focus"] .main-actions > .main-container:nth-child(3) .main-header {
    /* Larger, more prominent header for primary action */
    min-height: clamp(90px, 12vh, 120px);
    padding: clamp(1rem, 3vh, 2.5rem) clamp(1rem, 3vw, var(--spacing-lg));
}

[data-theme="focus"] .main-actions > .main-container:nth-child(3) .container-title {
    font-size: clamp(1.1rem, 2.5vw, 1.35rem);
    font-weight: 700;
    color: var(--primary-color);
}

[data-theme="focus"] .main-actions > .main-container:nth-child(3) .header-with-icon svg {
    width: 28px;
    height: 28px;
}

/* Focus Theme: Secondary Actions - Machine Select & Reference */
[data-theme="focus"] .main-actions > .main-container:nth-child(1),
[data-theme="focus"] .main-actions > .main-container:nth-child(2) {
    /* Narrower width (65-70%), explicitly right-aligned */
    width: var(--focus-secondary-width, 65%);
    align-self: flex-end;
    margin-left: auto;
    margin-right: 0;
    /* Subtler appearance - visually receded */
    border: var(--focus-secondary-border);
    background: rgba(250, 251, 252, 0.9);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.03);
    /* Subtle left border accent - less prominent */
    border-left: var(--focus-secondary-left-accent);
    /* Slightly reduced opacity for visual hierarchy */
    opacity: 0.92;
    position: relative;
    z-index: 1;
    /* Smooth transition for width/height expansion */
    transition:
        width 0.3s ease,
        align-self 0.3s ease,
        margin-left 0.3s ease,
        margin-right 0.3s ease,
        opacity 0.3s ease,
        background 0.3s ease,
        box-shadow 0.3s ease,
        border-color 0.3s ease;
}

[data-theme="focus"] .main-actions > .main-container:nth-child(1) .main-header,
[data-theme="focus"] .main-actions > .main-container:nth-child(2) .main-header {
    /* Smaller header for secondary actions */
    min-height: clamp(60px, 8vh, 80px);
    padding: clamp(0.6rem, 2vh, 1.5rem) clamp(0.75rem, 2.5vw, var(--spacing-md));
    /* Smooth transition for header size changes */
    transition: min-height 0.3s ease, padding 0.3s ease;
}

[data-theme="focus"] .main-actions > .main-container:nth-child(1) .container-title,
[data-theme="focus"] .main-actions > .main-container:nth-child(2) .container-title {
    font-size: clamp(0.8rem, 1.8vw, 0.95rem);
    font-weight: 500;
    color: var(--text-muted);
    letter-spacing: 0.01em;
    /* Smooth transition for text changes */
    transition: font-size 0.3s ease, font-weight 0.3s ease, color 0.3s ease;
}

[data-theme="focus"] .main-actions > .main-container:nth-child(1) .header-with-icon svg,
[data-theme="focus"] .main-actions > .main-container:nth-child(2) .header-with-icon svg {
    width: 20px;
    height: 20px;
    stroke: var(--text-muted);
    /* Smooth transition for icon changes */
    transition: width 0.3s ease, height 0.3s ease, stroke 0.3s ease;
}

/* Focus Theme: Secondary cards hover - subtle feedback */
[data-theme="focus"] .main-actions > .main-container:nth-child(1):hover,
[data-theme="focus"] .main-actions > .main-container:nth-child(2):hover {
    border-left-color: rgba(8, 145, 178, 0.5);
    background: rgba(255, 255, 255, 0.95);
    opacity: 1;
}

/* Focus Theme: Primary card hover - confident, dominant feedback */
[data-theme="focus"] .main-actions > .main-container:nth-child(3):hover {
    box-shadow: 0 8px 28px rgba(8, 145, 178, 0.15), 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 2px rgba(8, 145, 178, 0.2);
    transform: scale(1.01) translateY(-2px);
}

/* Focus Theme: Mobile adjustments - maintain hierarchy on small screens */
@media (max-width: 480px) {
    [data-theme="focus"] .main-actions > .main-container:nth-child(1),
    [data-theme="focus"] .main-actions > .main-container:nth-child(2) {
        /* Slightly wider on mobile for touch targets, but still secondary */
        width: 85%;
    }
}

/* ===================================
   SECONDARY CARD EXPANDED STATE
   Full-width expansion for secondary cards when opened
   Applies to: "Maschine auswählen" & "Referenz aufnehmen"
   =================================== */

/* Base expanded state - expand to full width */
.main-actions > .main-container.collapsible.expanded {
    width: 100%;
    max-width: var(--content-max-width);
    align-self: center;
    margin-left: auto;
    margin-right: auto;
    opacity: 1;
    /* Smooth transition for width expansion */
    transition:
        width 0.3s ease,
        max-width 0.3s ease,
        opacity 0.3s ease,
        border-color 0.3s ease,
        box-shadow 0.3s ease;
}

/* Focus Theme: Override secondary narrow width when expanded */
[data-theme="focus"] .main-actions > .main-container:nth-child(1).expanded,
[data-theme="focus"] .main-actions > .main-container:nth-child(2).expanded {
    /* Expand to full content width */
    width: 100%;
    max-width: var(--content-max-width);
    /* Center the expanded card */
    align-self: center;
    margin-left: auto;
    margin-right: auto;
    /* Full presence when expanded */
    opacity: 1;
    /* Elevated visual state */
    background: var(--bg-card);
    box-shadow: var(--shadow-lg, 0 4px 12px rgba(0, 0, 0, 0.1));
    border-color: var(--primary-color);
    /* Remove secondary left accent when expanded */
    border-left: 1px solid var(--primary-color);
}

/* Focus Theme: Restore secondary header when expanded */
[data-theme="focus"] .main-actions > .main-container:nth-child(1).expanded .main-header,
[data-theme="focus"] .main-actions > .main-container:nth-child(2).expanded .main-header {
    /* Full-size header when expanded */
    min-height: clamp(78px, 10.5vh, 108px);
    padding: clamp(0.75rem, 2.7vh, 2.25rem) clamp(0.75rem, 3vw, var(--spacing-lg));
}

/* Focus Theme: Restore secondary title when expanded */
[data-theme="focus"] .main-actions > .main-container:nth-child(1).expanded .container-title,
[data-theme="focus"] .main-actions > .main-container:nth-child(2).expanded .container-title {
    font-size: clamp(0.9rem, 2vw, 1.1rem);
    font-weight: 600;
    color: var(--text-primary);
}

/* Focus Theme: Restore secondary icon when expanded */
[data-theme="focus"] .main-actions > .main-container:nth-child(1).expanded .header-with-icon svg,
[data-theme="focus"] .main-actions > .main-container:nth-child(2).expanded .header-with-icon svg {
    width: 24px;
    height: 24px;
    stroke: var(--primary-color);
}

/* Mobile: Expanded cards always full width */
@media (max-width: 480px) {
    [data-theme="focus"] .main-actions > .main-container:nth-child(1).expanded,
    [data-theme="focus"] .main-actions > .main-container:nth-child(2).expanded {
        width: 100%;
    }
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
    .main-actions > .main-container.collapsible.expanded {
        transition: none;
    }
}

/* Focus Theme: Footer & Spacing - clear separation, visually secondary */
[data-theme="focus"] .footer {
    /* Clear visual separation from action area */
    margin-top: 2rem;
    background: var(--footer-bg);
    border: 1px solid var(--footer-border);
    /* Visually secondary - no competition with primary action */
    opacity: 0.85;
}

[data-theme="focus"] .footer:hover {
    opacity: 1;
}

[data-theme="focus"] .footer-link {
    color: var(--text-muted);
    font-size: 0.8rem;
}

[data-theme="focus"] .footer-link:hover {
    color: var(--primary-color);
}

/* Focus Theme: Main actions spacing */
[data-theme="focus"] .main-actions {
    gap: 1rem;
    margin-bottom: 1.5rem;
}

/* Focus Theme: Clear spacing between primary and secondary cards */
[data-theme="focus"] .main-actions > .main-container:nth-child(3) {
    margin-bottom: 0.75rem;
}

/* ===================================
   RESET & BASE STYLES
   =================================== */
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

body {
    font-family: var(--font-primary);
    background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
    color: var(--text-primary);
    line-height: 1.6;
    min-height: 100vh;
    overflow-x: hidden;
}

/* ===================================
   CONTAINER & LAYOUT
   =================================== */
.container {
    max-width: 900px;
    margin: 0 auto;
    padding: var(--spacing-md);
    padding-bottom: var(--space-footer-bottom);
    display: flex;
    flex-direction: column;
    /* Pack items from top - natural flow like a normal website */
    justify-content: flex-start;
    /* No gap here - child elements control their own spacing for deliberate rhythm */
    gap: 0;
    /* Natural height - grows with content, allows scrolling */
    min-height: 100dvh;
    height: auto;
    overflow-y: auto;
}

@media (min-width: 768px) {
    .container {
        padding: var(--spacing-lg);
        padding-bottom: var(--spacing-xl);
    }
}

/* ===================================
   MICROPHONE STATUS BADGE
   =================================== */
.status-badge {
    position: fixed;
    top: var(--spacing-sm);
    right: var(--spacing-sm);
    background: var(--bg-card);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--spacing-xs) var(--spacing-sm);
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    color: var(--primary-color);
    font-size: 0.875rem;
    font-weight: 500;
    box-shadow: var(--shadow-md);
    z-index: var(--z-modal-backdrop);
    animation: slideInDown 0.3s ease-out;
}

.status-badge svg {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
}

.status-badge.active {
    background: rgba(0, 230, 118, 0.1);
    border-color: var(--status-healthy);
    color: var(--status-healthy);
    animation: pulse 2s ease-in-out infinite;
}

/* ===================================
   HERO HEADER IMAGE
   =================================== */
.hero-header {
    /* Prevent browser from squashing header */
    flex-shrink: 0;
    width: 100%;
    max-width: var(--content-max-width);
    margin-left: auto;
    margin-right: auto;
    /* Space after banner before cards - same rhythm as card gap */
    margin-bottom: var(--space-card-gap);
    position: relative;
    /* Fixed height range for stability */
    height: clamp(108px, 18vh, 216px);
    min-height: 108px;
    max-height: 234px;
    overflow: hidden;
    border-radius: var(--radius-lg);
    background: linear-gradient(135deg, rgba(7, 18, 33, 0.8) 0%, rgba(17, 40, 64, 0.8) 100%);
    box-shadow: 0 4px 20px rgba(0, 212, 255, 0.15);
    border: 1px solid rgba(0, 212, 255, 0.2);
}

@media (max-width: 768px) {
    .hero-header {
        height: 18vh;
        min-height: 18vh;
        max-height: 18vh;
    }

    .hero-image {
        width: 100%;
        height: 100%;
        margin: 0;
        object-fit: cover;
    }
}

.hero-image {
    width: 100%;
    height: 100%;
    max-width: none;
    margin: 0;
    object-fit: cover;
    object-position: center;
    display: block;
}

/* ===================================
   HERO BANNER TEXT OVERLAY
   =================================== */
.hero-text-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    /* Left third stays free for illustration - text starts at 33.33% */
    padding-left: calc(33.33% + 24px);
    padding-right: 24px;
    padding-top: 16px;
    padding-bottom: 16px;
    pointer-events: none;
    z-index: 1;
}

.hero-headline {
    font-size: clamp(1.2rem, 2.5vw, 1.8rem);
    font-weight: 600;
    line-height: 1.3;
    margin: 0 0 8px 0;
    max-width: 100%;
}

.hero-subline {
    font-size: clamp(0.85rem, 1.5vw, 1.05rem);
    font-weight: 400;
    line-height: 1.5;
    margin: 0;
    max-width: 100%;
}

/* Theme-specific text colors */

/* Dark Theme (Neon): Light text with high contrast */
[data-theme="neon"] .hero-headline {
    color: #00f3ff; /* Neon cyan */
}

[data-theme="neon"] .hero-subline {
    color: rgba(248, 250, 252, 0.8); /* Almost white with opacity */
}

/* Light Theme: Dark text for readability */
[data-theme="light"] .hero-headline {
    color: #1e293b; /* Dark anthracite */
}

[data-theme="light"] .hero-subline {
    color: #475569; /* Neutral gray */
}

/* Brand Theme (Zanobo): Light theme with brand identity */
[data-theme="brand"] .hero-headline {
    color: #2D3E50; /* Dark anthracite for light background */
}

[data-theme="brand"] .hero-subline {
    color: #5A6B7A; /* Medium grey-blue for readability */
}

/* Focus Theme (Steve Jobs): Very restrained, minimalist */
[data-theme="focus"] .hero-headline {
    color: #1e293b; /* Very dark grey */
}

[data-theme="focus"] .hero-subline {
    color: #94a3b8; /* Light grey */
}

/* Optional: Subtle gradient behind text for better readability (max 10-15%) */
.hero-text-overlay::before {
    content: '';
    position: absolute;
    top: 0;
    left: 33.33%;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg,
        rgba(0, 0, 0, 0.1) 0%,
        rgba(0, 0, 0, 0.05) 50%,
        transparent 100%
    );
    z-index: -1;
    pointer-events: none;
}

/* Light themes use lighter gradient */
[data-theme="light"] .hero-text-overlay::before,
[data-theme="focus"] .hero-text-overlay::before,
[data-theme="brand"] .hero-text-overlay::before {
    background: linear-gradient(90deg,
        rgba(255, 255, 255, 0.15) 0%,
        rgba(255, 255, 255, 0.08) 50%,
        transparent 100%
    );
}

/* Responsive: Mobile adjustments */
@media (max-width: 768px) {
    .hero-text-overlay {
        /* Maintain left third free on mobile */
        padding-left: calc(33.33% + 16px);
        padding-right: 16px;
    }

    .hero-headline {
        font-size: clamp(0.95rem, 4vw, 1.2rem);
        margin-bottom: 6px;
    }

    .hero-subline {
        font-size: clamp(0.7rem, 2.8vw, 0.85rem);
        line-height: 1.4;
        /* Ensure max 2 lines on mobile */
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
}

/* Extra small screens: Adjust text even more */
@media (max-width: 480px) {
    .hero-text-overlay {
        padding-left: calc(33.33% + 12px);
        padding-right: 12px;
    }
}

/* ===================================
   MAIN ACTIONS LAYOUT (Fixed Centered Column)
   =================================== */
.main-actions {
    display: flex;
    flex-direction: column;
    /* Prevent squashing - push down and scroll instead */
    flex: 0 0 auto;
    justify-content: flex-start;
    /* Gap between action cards - tighter grouping for primary zone */
    gap: var(--space-card-gap);
    align-items: stretch;
    width: 100%;
    max-width: var(--content-max-width);
    margin: 0 auto;
    /* Deliberate large gap after cards - signals "end of primary actions" */
    margin-bottom: var(--space-section-gap);
}

@media (min-width: 900px) {
    :root {
        --content-max-width: 520px;
    }

    .container {
        max-width: 520px;
    }

    .main-header {
        padding-left: clamp(1rem, 2vw, 1.5rem);
        padding-right: clamp(1rem, 2vw, 1.5rem);
    }
}

/* ===================================
   HEADER (inside container)
   =================================== */
.header-inline {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.header-divider {
    height: 1px;
    background: var(--divider-color);
    margin: var(--spacing-lg) 0;
}

.logo-section {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.logo svg {
    display: block;
    filter: drop-shadow(var(--glow-primary));
}

.branding {
    display: flex;
    flex-direction: column;
}

.brand-title {
    font-size: 1.75rem;
    font-weight: 700;
    letter-spacing: 0.05em;
    color: var(--primary-color);
    line-height: 1;
    margin-bottom: 0.25rem;
}

.brand-subtitle {
    font-size: 0.75rem;
    font-weight: 500;
    letter-spacing: 0.15em;
    color: var(--text-secondary);
    text-transform: uppercase;
}

/* Theme Switcher */
.theme-switcher {
    display: flex;
    gap: var(--spacing-xs);
    background: rgba(17, 40, 64, 0.4);
    border: 1px solid rgba(0, 212, 255, 0.2);
    border-radius: var(--radius-md);
    padding: 0.25rem;
}

.theme-btn {
    background: transparent;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 0.5rem;
    border-radius: var(--radius-sm);
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.theme-btn:hover {
    background: rgba(0, 212, 255, 0.1);
    color: var(--primary-color);
}

.theme-btn.active {
    background: var(--primary-color);
    color: var(--bg-primary);
    box-shadow: var(--glow-primary);
}

.theme-btn svg {
    display: block;
}

/* Welcome Section Inline */
.welcome-section-inline {
    /* Welcome section now inline with header */
}

/* ===================================
   MAIN CONTAINERS
   =================================== */
.main-container {
    width: 100%;
    max-width: var(--content-max-width);
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 0;
    background: var(--bg-card);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    transition: all 0.3s ease;
    overflow: hidden;
    /* STABIL: Container darf nicht wachsen/schrumpfen - behält natürliche Größe */
    flex: 0 0 auto;
}

.main-container:hover {
    border-color: var(--primary-color);
}

/* ===================================
   PRIMARY CARD VARIANT
   "Diagnose starten" as primary CTA
   Stacked visual cues for emphasis
   =================================== */
.main-container[data-variant="primary"] {
    /* Stronger border (1px → 2px) with accent color */
    border: var(--primary-card-border);

    /* Elevated shadow + subtle outer glow */
    box-shadow:
        var(--primary-card-shadow),
        var(--primary-card-glow);

    /* Ensure it renders above siblings for shadow visibility */
    position: relative;
    z-index: 1;
}

/* Primary card header with icon emphasis */
.main-container[data-variant="primary"] .main-header {
    /* Slightly stronger divider */
    border-bottom-color: rgba(var(--primary-card-accent), 0.15);
}

.main-container[data-variant="primary"] .header-with-icon svg {
    /* Icon gets stronger accent filter */
    filter: var(--primary-card-icon-filter);
}

.main-container[data-variant="primary"] .container-title {
    /* Slightly bolder title */
    font-weight: 700;
}

/* Enhanced hover state */
.main-container[data-variant="primary"]:hover {
    /* Stronger glow on hover */
    box-shadow:
        var(--primary-card-shadow),
        var(--primary-card-hover-glow);
}

/* Active/pressed state */
.main-container[data-variant="primary"]:active {
    transform: translateY(1px);
    box-shadow:
        0 4px 16px rgba(0, 0, 0, 0.35),
        var(--primary-card-glow);
}

/* Keyboard focus state (accessibility) */
.main-container[data-variant="primary"]:focus-within {
    outline: 2px solid var(--primary-card-accent);
    outline-offset: 2px;
}

/* Primary Card Badge - "Empfohlen" label */
.primary-card-badge {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    padding: 0.2rem 0.5rem;
    font-size: 0.65rem;
    font-weight: 600;
    letter-spacing: 0.03em;
    text-transform: uppercase;
    color: var(--text-secondary);
    background: var(--primary-card-badge-bg);
    border: 1px solid var(--primary-card-badge-border);
    border-radius: var(--radius-xs);
    pointer-events: none;
    opacity: 0.85;
}

/* Badge visibility on hover */
.main-container[data-variant="primary"]:hover .primary-card-badge {
    opacity: 1;
}

.container-content {
    padding: var(--spacing-lg);
}

/* Main Container Header (for collapsible main containers) */
.main-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    padding: clamp(0.75rem, 2.7vh, 2.25rem) clamp(0.75rem, 3vw, var(--spacing-lg));
    min-height: clamp(78px, 10.5vh, 108px);
    border-bottom: 1px solid var(--divider-color);
    transition: background 0.2s ease;
}

.main-header:hover {
    background: rgba(0, 212, 255, 0.05);
}

.container-title {
    font-size: clamp(0.95rem, 2.2vw, 1.125rem);
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

/* Header with Icon */
.header-with-icon {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.header-with-icon svg {
    flex-shrink: 0;
}

/* Welcome Section Specific */
.welcome-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.welcome-title span {
    color: var(--primary-color);
}

.welcome-subtitle {
    font-size: 1rem;
    color: var(--text-secondary);
}

/* ===================================
   SUB CONTAINERS (Inside Main Container 2)
   =================================== */
.sub-container {
    background: var(--bg-tertiary);
    border: 1px solid rgba(0, 212, 255, 0.15);
    border-radius: var(--radius-md);
    margin-bottom: var(--spacing-md);
    transition: all 0.3s ease;
    overflow: hidden;
}

.sub-container:last-child {
    margin-bottom: 0;
}

.sub-container:hover {
    border-color: var(--primary-color);
    box-shadow: 0 0 15px rgba(0, 212, 255, 0.2);
}

.sub-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    padding: var(--spacing-md);
    transition: background 0.2s ease;
}

.sub-header:hover {
    background: rgba(0, 212, 255, 0.08);
}

.sub-header-content {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    flex: 1;
}

.sub-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.sub-icon svg {
    display: block;
    filter: drop-shadow(0 0 6px rgba(0, 212, 255, 0.3));
}

.sub-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.sub-content {
    padding: 0 var(--spacing-md) var(--spacing-md) var(--spacing-md);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.sub-description {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin: 0;
}

.action-btn {
    width: 100%;
    padding: var(--btn-padding-md);
    background: transparent;
    border: 2px solid var(--primary-color);
    border-radius: var(--radius-md);
    color: var(--primary-color);
    font-size: var(--btn-font-sm);
    font-weight: var(--btn-font-weight);
    cursor: pointer;
    transition: var(--btn-transition);
    text-transform: uppercase;
    letter-spacing: var(--btn-letter-spacing);
}

.action-btn:hover {
    background: var(--primary-color);
    color: var(--bg-primary);
    box-shadow: var(--glow-strong);
    transform: var(--hover-scale);
}

.action-btn:active {
    transform: var(--active-press);
}

/* Secondary button variant */
.secondary-btn {
    border-color: var(--text-secondary);
    color: var(--text-secondary);
}

.secondary-btn:hover {
    background: var(--text-secondary);
    color: var(--bg-primary);
    border-color: var(--text-secondary);
}

/* Danger button variant */
.action-btn.danger-btn {
    border-color: var(--status-error);
    color: var(--status-error);
}

.action-btn.danger-btn:hover {
    background: var(--status-error);
    color: var(--bg-primary);
    border-color: var(--status-error);
}

/* Machine Selection Options */
.machine-selection-option {
    background: rgba(17, 40, 64, 0.4);
    border: 1px solid rgba(0, 212, 255, 0.1);
    border-radius: var(--radius-sm);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.machine-selection-option:last-of-type {
    margin-bottom: 0;
}

.option-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-xs);
}

.option-header svg {
    flex-shrink: 0;
}

.option-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.option-description {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-bottom: var(--spacing-md);
}

.option-divider {
    position: relative;
    text-align: center;
    margin: var(--spacing-lg) 0;
}

.option-divider::before {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    top: 50%;
    height: 1px;
    background: var(--divider-color);
}

.option-divider span {
    position: relative;
    display: inline-block;
    padding: 0 var(--spacing-sm);
    background: var(--bg-tertiary);
    color: var(--text-muted);
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

/* Input Groups */
.input-group {
    margin-bottom: var(--spacing-md);
}

.input-group label {
    display: block;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-xs);
}

.machine-input {
    width: 100%;
    padding: 0.75rem;
    background: rgba(17, 40, 64, 0.6);
    border: 1px solid rgba(0, 212, 255, 0.2);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.875rem;
    font-family: var(--font-primary);
    transition: all 0.2s ease;
}

.machine-input::placeholder {
    color: var(--text-muted);
}

.machine-input:focus {
    outline: none;
    border-color: var(--primary-color);
    background: rgba(17, 40, 64, 0.8);
    box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
}

/* Highlight animation for navigation feedback */
.machine-input.input-highlight {
    animation: input-highlight-pulse 0.5s ease-out 3;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 4px rgba(0, 212, 255, 0.3);
}

@keyframes input-highlight-pulse {
    0% {
        box-shadow: 0 0 0 4px rgba(0, 212, 255, 0.3);
        border-color: var(--primary-color);
    }
    50% {
        box-shadow: 0 0 0 8px rgba(0, 212, 255, 0.15), 0 0 20px rgba(0, 212, 255, 0.2);
        border-color: var(--primary-color);
    }
    100% {
        box-shadow: 0 0 0 4px rgba(0, 212, 255, 0.3);
        border-color: var(--primary-color);
    }
}

/* Theme-specific highlight colors */
[data-theme="light"] .machine-input.input-highlight {
    box-shadow: 0 0 0 4px rgba(15, 23, 42, 0.15);
}

[data-theme="brand"] .machine-input.input-highlight {
    box-shadow: 0 0 0 4px rgba(0, 184, 217, 0.25);
}

[data-theme="focus"] .machine-input.input-highlight {
    box-shadow: 0 0 0 4px rgba(8, 145, 178, 0.25);
}

/* Action button with icon */
.action-btn svg {
    margin-right: 0.25rem;
}

/* ===================================
   COLLAPSIBLE SECTIONS
   =================================== */
.collapsible {
    /* STABIL: Container behält feste Position im Flex-Layout */
    flex: 0 0 auto;
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    transition: background 0.2s ease;
}

.collapse-icon {
    transition: transform 0.3s ease;
    color: var(--text-secondary);
    flex-shrink: 0;
}

.collapse-icon.rotated {
    transform: rotate(180deg);
}

.collapsible-content {
    animation: slideDown 0.3s ease-out;
    overflow: hidden;
}

/* STABIL: Wenn Content hidden ist, Container behält Mindesthöhe durch Header */
.collapsible-content[style*="display: none"] + .main-header,
.collapsible > .main-header {
    /* Header bleibt stabil sichtbar */
}

/* ===================================
   MACHINE OVERVIEW
   =================================== */
.machine-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.machine-item {
    background: var(--bg-tertiary);
    border: 1px solid rgba(0, 212, 255, 0.15);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

.machine-item:hover {
    background: var(--bg-secondary);
    border-color: var(--primary-color);
    transform: translateX(4px);
}

.machine-info {
    flex-grow: 1;
}

.machine-name {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.machine-status {
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
    display: inline-block;
}

.machine-status.status-healthy {
    color: var(--status-healthy);
}

.machine-status.status-uncertain {
    color: var(--status-uncertain);
}

.machine-status.status-error {
    color: var(--status-error);
}

.machine-time {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.chevron-right {
    color: var(--text-muted);
    flex-shrink: 0;
}

.add-reference-btn {
    width: 100%;
    padding: var(--spacing-md);
    background: transparent;
    border: 2px dashed var(--border-color);
    border-radius: var(--radius-md);
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    transition: all 0.2s ease;
    margin-top: var(--spacing-sm);
}

.add-reference-btn:hover {
    border-color: var(--primary-color);
    color: var(--primary-color);
    background: rgba(0, 212, 255, 0.05);
}

/* ===================================
   QUICK SELECT - MACHINE HISTORY
   =================================== */
.quick-select-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    margin-top: var(--spacing-sm);
}

.quick-select-item {
    background: var(--bg-tertiary);
    border: 1px solid rgba(0, 212, 255, 0.15);
    border-radius: var(--radius-sm);
    padding: 0.75rem 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.9rem;
}

.quick-select-item:hover {
    background: var(--bg-secondary);
    border-color: var(--primary-color);
    transform: translateX(2px);
}

.quick-select-item-info {
    flex-grow: 1;
}

.quick-select-machine-name {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.125rem;
}

.quick-select-machine-id {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-family: var(--font-mono);
}

/* ===================================
   QUICK CHECK BUTTON
   =================================== */
.quick-check-btn {
    width: 100%;
    padding: var(--btn-padding-lg);
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    border: none;
    border-radius: var(--radius-md);
    color: var(--bg-primary);
    font-size: var(--btn-font-lg);
    font-weight: var(--btn-font-weight);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    transition: var(--btn-transition);
    box-shadow: var(--shadow-md), var(--glow-primary);
    text-transform: uppercase;
    letter-spacing: var(--btn-letter-spacing);
}

.quick-check-btn:hover {
    transform: var(--hover-lift);
    box-shadow: var(--shadow-lg), var(--glow-strong);
}

.quick-check-btn:active {
    transform: var(--active-press);
}

/* ===================================
   HISTORY SECTION
   =================================== */
.history-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.history-list:empty,
.history-list:has(.empty-state:only-child) {
    text-align: center;
}

.history-item {
    background: var(--bg-tertiary);
    border: 1px solid rgba(0, 212, 255, 0.1);
    border-radius: var(--radius-sm);
    padding: 0.75rem 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

.history-item:hover {
    background: var(--bg-secondary);
    border-color: var(--primary-color);
    transform: translateX(2px);
}

.history-info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    flex: 1;
    min-width: 0;
}

.history-machine-name {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.history-details {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
}

.history-status-badge {
    font-size: 0.7rem;
    font-weight: 600;
    padding: 0.15rem 0.5rem;
    border-radius: var(--radius-sm);
    text-transform: uppercase;
    letter-spacing: 0.025em;
}

.history-status-badge.status-healthy {
    background: rgba(0, 212, 115, 0.15);
    color: var(--status-healthy);
}

.history-status-badge.status-uncertain {
    background: rgba(255, 193, 7, 0.15);
    color: var(--status-uncertain);
}

.history-status-badge.status-faulty {
    background: rgba(255, 82, 82, 0.15);
    color: var(--status-error);
}

.history-score {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-family: var(--font-mono);
}

.history-time {
    font-size: 0.7rem;
    color: var(--text-muted);
}

/* Additional machine status classes */
.machine-status.status-no-data {
    color: var(--text-muted);
}

.machine-status.status-ready {
    color: var(--primary-color);
}

.machine-status.status-faulty {
    color: var(--status-error);
}

.empty-state {
    color: var(--text-muted);
    font-size: 0.875rem;
    text-align: center;
    padding: var(--spacing-md) 0;
}

/* ===================================
   SETTINGS SECTION
   =================================== */
.settings-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.setting-item {
    background: var(--bg-tertiary);
    border: 1px solid rgba(0, 212, 255, 0.15);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
}

.setting-item label {
    display: block;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-xs);
}

.setting-item input[type="range"] {
    width: 100%;
    height: 6px;
    background: var(--bg-tertiary);
    border-radius: 3px;
    outline: none;
    margin-bottom: var(--spacing-xs);
    -webkit-appearance: none;
}

.setting-item input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    background: var(--primary-color);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: var(--glow-primary);
}

.setting-item input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: var(--primary-color);
    border-radius: 50%;
    cursor: pointer;
    border: none;
    box-shadow: var(--glow-primary);
}

.setting-item select {
    width: 100%;
    padding: 0.75rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.875rem;
    cursor: pointer;
}

.setting-item span {
    display: block;
    font-size: 0.875rem;
    color: var(--primary-color);
    font-weight: 600;
    text-align: right;
}

.setting-toggle {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-sm);
}

.setting-toggle input[type="checkbox"] {
    margin-top: 0.2rem;
    accent-color: var(--primary-color);
}

.setting-description {
    margin: 0;
    font-size: 0.8rem;
    color: var(--text-muted);
    line-height: 1.4;
}


.setting-warning-header {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-xs);
}

/* ===================================
   FOOTER
   =================================== */
.footer {
    /* Prevent browser from squashing footer when space is tight */
    flex-shrink: 0;
    /* Controlled spacing - section gap is on .main-actions margin-bottom */
    margin-top: 0;
    width: 100%;
    max-width: var(--content-max-width);
    /* Stable height - no viewport dependency */
    min-height: 80px;
    height: auto;
    margin-left: auto;
    margin-right: auto;
    padding: 0.75rem 1rem;
    text-align: center;
    border-radius: var(--radius-lg);
    background: var(--footer-bg);
    /* Enhanced visual grounding - subtle top shadow creates "floor" effect */
    box-shadow:
        var(--shadow-md),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
    border: 1px solid var(--footer-border);
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 0.3rem;
    color: var(--footer-text);
    /* Smaller typography - footer is secondary, not competing with cards */
    font-size: var(--font-sm);
}

.footer-compact {
    padding-top: 0.5rem;
}

.footer-compact .legal-info {
    gap: var(--spacing-sm);
    flex-wrap: nowrap;
}

.footer-compact .footer-link,
.footer-compact .separator {
    font-size: 0.75rem;
}

.footer-compact .copyright {
    font-size: 0.65rem;
}

.legal-info {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
    flex-wrap: wrap;
}

.footer-link {
    background: none;
    border: none;
    color: var(--footer-text);
    font-size: 0.875rem;
    cursor: pointer;
    transition: color 0.2s ease;
    padding: 0;
}

.footer-link:hover {
    color: var(--primary-color);
}

/* Footer Grid Layout - Minimalist 2x2 Grid */
.footer-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-xs) 0;
    width: 100%;
    max-width: 280px;
    margin: 0 auto;
}

.footer-grid .footer-link {
    justify-self: center;
    padding: 0.25rem 0.5rem;
}

/* ===================================
   MODALS
   =================================== */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: var(--z-modal);
    padding: var(--spacing-md);
    animation: fadeIn 0.3s ease-out;
}

.modal-content {
    background: var(--bg-modal);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-xl);
    max-width: 500px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: var(--shadow-lg), var(--glow-primary);
    animation: slideUp 0.3s ease-out;
}

.app-shell-container {
    display: flex;
    flex-direction: column;
    height: 100dvh;
    max-height: 100dvh;
    overflow: hidden;
}

.shell-header,
.shell-footer {
    flex: 0 0 auto;
}

.shell-content {
    flex: 1;
    overflow-y: auto;
}

.modal-header {
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--divider-color);
    position: relative;
}

.modal-header h3 {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.modal-subtitle {
    font-size: 0.875rem;
    color: var(--primary-color);
    font-weight: 600;
    letter-spacing: 0.1em;
}

.close-modal-btn {
    position: absolute;
    top: var(--spacing-md);
    right: var(--spacing-md);
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.5rem;
    border-radius: var(--radius-sm);
    transition: all 0.2s ease;
}

.close-modal-btn:hover {
    background: rgba(255, 82, 82, 0.1);
    color: var(--status-error);
}

.modal-header-actions {
    position: absolute;
    top: var(--spacing-md);
    right: var(--spacing-md);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.modal-header-actions .close-modal-btn {
    position: static;
    top: auto;
    right: auto;
}

.modal-body {
    padding: var(--spacing-lg);
}

/* Recording Modal Specific */
#waveform-canvas {
    width: 100%;
    height: 150px;
    margin-bottom: var(--spacing-md);
    border-radius: var(--radius-md);
    background: var(--bg-tertiary);
}

.recording-status {
    font-size: 0.875rem;
    color: var(--status-healthy);
    font-weight: 600;
    text-align: center;
    margin-bottom: var(--spacing-xs);
}

.recording-timer {
    font-size: 2rem;
    font-family: var(--font-mono);
    color: var(--text-primary);
    text-align: center;
    margin-bottom: var(--spacing-md);
}

/* Diagnosis Modal Specific */
.result-card {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
}

.result-barcode {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
}

.result-barcode svg {
    color: var(--text-secondary);
    flex-shrink: 0;
}

.result-barcode span {
    font-family: var(--font-mono);
    font-size: 1rem;
    color: var(--text-primary);
    font-weight: 600;
}

.result-fingerprint {
    padding: var(--spacing-lg);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    text-align: center;
}

.result-fingerprint h4 {
    font-size: 0.875rem;
    color: var(--text-secondary);
    font-weight: 600;
    margin-bottom: var(--spacing-sm);
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

.result-status {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: var(--spacing-xs);
}

.result-status.status-healthy {
    color: var(--status-healthy);
}

.result-confidence {
    font-size: 1rem;
    color: var(--text-secondary);
}

.result-confidence span {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
}


.result-analysis {
    padding: var(--spacing-md);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
}

.result-analysis h4 {
    font-size: 0.875rem;
    color: var(--text-secondary);
    font-weight: 600;
    margin-bottom: var(--spacing-xs);
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

.analysis-label {
    font-size: 0.875rem;
    color: var(--text-primary);
    margin-bottom: var(--spacing-sm);
}

#analysis-canvas {
    width: 100%;
    height: 100px;
    margin-bottom: var(--spacing-sm);
    border-radius: var(--radius-sm);
    background: var(--bg-tertiary);
}

.analysis-hint {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-style: italic;
}

/* ===================================
   WORK POINT RANKING COMPONENT
   Industrial Dashboard - "Fieberthermometer" Design
   =================================== */
.work-point-ranking {
    padding: var(--spacing-md);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    overflow: hidden;
}

/* Header */
.ranking-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--divider-color);
}

.ranking-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin: 0;
}

.ranking-count {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-weight: 500;
}

/* List container */
.ranking-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

/* Single ranking item */
.ranking-item {
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-tertiary);
    border: 1px solid transparent;
    border-radius: var(--radius-sm);
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.ranking-item:hover {
    border-color: var(--border-color);
    transform: translateX(4px);
}

/* Rank 1 special styling */
.ranking-item[data-rank="1"] {
    background: linear-gradient(135deg, var(--bg-tertiary) 0%, rgba(var(--status-healthy-rgb, 0, 230, 118), 0.08) 100%);
    border-color: rgba(var(--status-healthy-rgb, 0, 230, 118), 0.2);
}

.ranking-item[data-rank="1"].status-faulty {
    background: linear-gradient(135deg, var(--bg-tertiary) 0%, rgba(var(--status-error-rgb, 255, 82, 82), 0.08) 100%);
    border-color: rgba(var(--status-error-rgb, 255, 82, 82), 0.2);
}

/* Item header (Info line) */
.ranking-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-xs);
    flex-wrap: wrap;
}

.ranking-item-left {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    flex: 1;
    min-width: 0;
}

.ranking-item-right {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    flex-shrink: 0;
}

/* Rank number */
.ranking-rank {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--text-muted);
    min-width: 2em;
    text-align: center;
}

.ranking-item[data-rank="1"] .ranking-rank {
    color: var(--primary-color);
}

/* State name */
.ranking-name {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
}

/* Status badge */
.ranking-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    border-radius: var(--radius-pill);
    font-size: 0.65rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.ranking-badge.status-healthy {
    background: rgba(var(--status-healthy-rgb, 0, 230, 118), 0.15);
    color: var(--status-healthy);
    border: 1px solid rgba(var(--status-healthy-rgb, 0, 230, 118), 0.3);
}

.ranking-badge.status-faulty {
    background: rgba(var(--status-error-rgb, 255, 82, 82), 0.15);
    color: var(--status-error);
    border: 1px solid rgba(var(--status-error-rgb, 255, 82, 82), 0.3);
}

.ranking-badge svg {
    width: 12px;
    height: 12px;
    flex-shrink: 0;
}

.ranking-badge-text {
    display: none;
}

@media (min-width: 400px) {
    .ranking-badge-text {
        display: inline;
    }
}

/* Score display */
.ranking-score {
    font-family: var(--font-mono);
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--text-primary);
    min-width: 3.5em;
    text-align: right;
}

/* Progress bar container (Thermometer) */
.ranking-bar-container {
    position: relative;
    height: 6px;
    background: var(--bg-secondary);
    border-radius: var(--radius-pill);
    overflow: hidden;
    margin-top: 4px;
}

/* Progress bar */
.ranking-bar {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 0;
    border-radius: var(--radius-pill);
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.ranking-bar.animate {
    width: var(--bar-width);
}

/* Bar glow effect */
.ranking-bar-glow {
    position: absolute;
    top: -2px;
    left: 0;
    height: calc(100% + 4px);
    width: 0;
    border-radius: var(--radius-pill);
    filter: blur(4px);
    opacity: 0.4;
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
}

.ranking-bar.animate + .ranking-bar-glow {
    width: var(--bar-width);
}

/* Bar color variants - Healthy states */
.ranking-bar.bar-healthy-high {
    background: linear-gradient(90deg, var(--status-healthy) 0%, #00ff88 100%);
}

.ranking-bar-glow.bar-healthy-high {
    background: var(--status-healthy);
}

.ranking-bar.bar-healthy-mid {
    background: linear-gradient(90deg, var(--status-warning) 0%, var(--status-healthy) 100%);
}

.ranking-bar-glow.bar-healthy-mid {
    background: var(--status-warning);
}

.ranking-bar.bar-healthy-low {
    background: linear-gradient(90deg, var(--text-muted) 0%, var(--status-warning) 100%);
}

.ranking-bar-glow.bar-healthy-low {
    background: var(--text-muted);
}

/* Bar color variants - Faulty states */
.ranking-bar.bar-error-high {
    background: linear-gradient(90deg, var(--status-error) 0%, #ff6666 100%);
}

.ranking-bar-glow.bar-error-high {
    background: var(--status-error);
}

.ranking-bar.bar-error-low {
    background: linear-gradient(90deg, var(--status-warning) 30%, var(--status-error) 100%);
}

.ranking-bar-glow.bar-error-low {
    background: var(--status-warning);
}

/* Empty state */
.ranking-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-xl) var(--spacing-md);
    text-align: center;
    color: var(--text-muted);
}

.ranking-empty svg {
    opacity: 0.4;
    margin-bottom: var(--spacing-sm);
}

.ranking-empty p {
    font-size: 0.875rem;
    margin: 0;
}

/* Responsive adjustments */
@media (max-width: 360px) {
    .ranking-item {
        padding: var(--spacing-xs) var(--spacing-sm);
    }

    .ranking-name {
        font-size: 0.8rem;
    }

    .ranking-score {
        font-size: 0.8rem;
    }

    .ranking-badge {
        padding: 1px 6px;
        font-size: 0.6rem;
    }

    .ranking-bar-container {
        height: 5px;
    }
}

/* Theme: Neon specific enhancements */
[data-theme="neon"] .ranking-item[data-rank="1"] {
    box-shadow: 0 0 10px rgba(0, 243, 255, 0.1);
}

[data-theme="neon"] .ranking-bar.bar-healthy-high {
    box-shadow: 0 0 8px var(--status-healthy);
}

[data-theme="neon"] .ranking-bar.bar-error-high {
    box-shadow: 0 0 8px var(--status-error);
}

/* Theme: Light mode adjustments */
[data-theme="light"] .ranking-item {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
}

[data-theme="light"] .ranking-bar-container {
    background: var(--bg-tertiary);
}

[data-theme="light"] .ranking-bar-glow {
    opacity: 0.2;
}

/* Theme: Brand mode adjustments (light theme) */
[data-theme="brand"] .ranking-item {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
}

[data-theme="brand"] .ranking-bar-container {
    background: var(--bg-tertiary);
}

[data-theme="brand"] .ranking-bar-glow {
    opacity: 0.2;
}

/* Animation keyframes */
@keyframes ranking-slide-in {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.ranking-item {
    animation: ranking-slide-in 0.3s ease forwards;
    animation-delay: var(--animation-delay, 0ms);
}

/* CSS Variables for RGB values (needed for rgba) */
:root {
    --status-healthy-rgb: 0, 230, 118;
    --status-error-rgb: 255, 82, 82;
    --status-warning-rgb: 255, 183, 77;
}

[data-theme="neon"] {
    --status-healthy-rgb: 0, 255, 136;
    --status-error-rgb: 255, 51, 102;
    --status-warning-rgb: 255, 165, 0;
}

[data-theme="light"] {
    --status-healthy-rgb: 22, 163, 74;
    --status-error-rgb: 220, 38, 38;
    --status-warning-rgb: 245, 158, 11;
}

[data-theme="brand"] {
    --status-healthy-rgb: 16, 185, 129;
    --status-error-rgb: 239, 68, 68;
    --status-warning-rgb: 245, 158, 11;
}

.result-quality {
    padding: var(--spacing-md);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
}

.result-quality h4 {
    font-size: 0.875rem;
    color: var(--text-secondary);
    font-weight: 600;
    margin-bottom: var(--spacing-sm);
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

.quality-status {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: var(--spacing-xs);
}

.quality-status.status-good {
    color: var(--status-healthy);
}

.quality-description {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

/* Modal Actions */
.modal-actions {
    padding: var(--spacing-lg);
    border-top: 1px solid var(--divider-color);
    display: flex;
    gap: var(--spacing-sm);
}

.modal-btn {
    flex: 1;
    padding: var(--btn-padding-md);
    border: none;
    border-radius: var(--radius-md);
    font-size: var(--btn-font-md);
    font-weight: var(--btn-font-weight);
    cursor: pointer;
    transition: var(--btn-transition);
    text-transform: uppercase;
    letter-spacing: var(--btn-letter-spacing);
}

.modal-btn.btn-primary {
    background: var(--primary-color);
    color: var(--bg-primary);
    box-shadow: var(--glow-primary);
}

.modal-btn.btn-primary:hover {
    background: var(--primary-hover);
    box-shadow: var(--glow-strong);
    transform: var(--hover-lift);
}

.modal-btn.btn-secondary {
    background: transparent;
    border: 2px solid var(--border-color);
    color: var(--text-primary);
}

.modal-btn.btn-secondary:hover {
    border-color: var(--primary-color);
    color: var(--primary-color);
    background: rgba(0, 212, 255, 0.05);
}

/* ===================================
   INSPECTION VIEW (Simplified PWA)
   Minimalist, industrial, trust-building
   =================================== */

/* ===================================
   LIVE DIAGNOSIS - 20/60/20 LAYOUT
   Header: max 20%, Middle: 60%, Footer: max 20%
   =================================== */

/* Full-screen inspection modal */
.inspection-modal .modal-content {
    max-width: var(--content-max-width);
    max-height: 100%;
    height: 100dvh;
    width: 100%;
    border-radius: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    margin: 0 auto; /* Center on desktop */
}

/* On mobile, use full width */
@media (max-width: 480px) {
    .inspection-modal .modal-content {
        max-width: 100%;
    }
}

/* Fixed header banner - max 20% of viewport */
.inspection-header {
    flex: 0 0 auto;
    max-height: 20vh;
    min-height: 80px;
    padding: var(--spacing-md) var(--spacing-md);
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--divider-color);
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    overflow: hidden;
}

.inspection-question {
    font-size: clamp(1.25rem, 5vw, 1.75rem);
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 var(--spacing-xs);
    line-height: 1.3;
}

.inspection-subtitle {
    font-size: clamp(0.875rem, 3vw, 1rem);
    color: var(--text-secondary);
    margin: 0;
    opacity: 0.9;
}

.inspection-machine-name {
    font-size: 0.8rem;
    color: var(--primary-color);
    margin-top: var(--spacing-xs);
    font-weight: 500;
    letter-spacing: 0.05em;
}

/* Middle content area - takes remaining 60% (flex grows) */
.inspection-content {
    flex: 1 1 60vh;
    min-height: 0;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: var(--spacing-sm) var(--spacing-md);
    gap: var(--spacing-md);
}

/* Main percentage display - scales to fit available space */
.inspection-score-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    /* Responsive sizing: min 180px, preferred 50% of container width, max 280px */
    width: clamp(180px, 50vw, 280px);
    height: clamp(180px, 50vw, 280px);
    /* Also respect available height */
    max-width: min(280px, 80%);
    max-height: min(280px, 45vh);
    aspect-ratio: 1;
    border-radius: 50%;
    position: relative;
    transition: background-color 0.5s ease, box-shadow 0.5s ease;
    text-align: center;
    flex-shrink: 0;
}

/* Center score absolutely for perfect alignment with pulse animation */
.inspection-score {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1;
    font-size: clamp(4rem, 20vw, 7rem);
    font-weight: 700;
    line-height: 1;
    transition: color 0.3s ease;
    /* Optical centering: only the number determines center position */
    text-align: center;
    white-space: nowrap;
}

/* Status-based background colors */
.inspection-score-container.status-healthy {
    background: radial-gradient(circle, rgba(0, 230, 118, 0.15) 0%, rgba(0, 230, 118, 0.05) 70%, transparent 100%);
    box-shadow: 0 0 60px rgba(0, 230, 118, 0.2);
}

.inspection-score-container.status-uncertain {
    background: radial-gradient(circle, rgba(255, 183, 77, 0.15) 0%, rgba(255, 183, 77, 0.05) 70%, transparent 100%);
    box-shadow: 0 0 60px rgba(255, 183, 77, 0.2);
}

.inspection-score-container.status-faulty {
    background: radial-gradient(circle, rgba(255, 82, 82, 0.15) 0%, rgba(255, 82, 82, 0.05) 70%, transparent 100%);
    box-shadow: 0 0 60px rgba(255, 82, 82, 0.2);
}

.inspection-score-unit {
    /* Absolute positioning so % sign doesn't shift number off-center */
    position: absolute;
    top: 50%;
    transform: translateY(-70%);
    font-size: 0.4em;
    font-weight: 400;
    opacity: 0.7;
    margin-left: 0.05em;
}

.inspection-score.status-healthy {
    color: var(--status-healthy);
}

.inspection-score.status-uncertain {
    color: var(--status-warning);
}

.inspection-score.status-faulty {
    color: var(--status-error);
}

/* Status word label - positioned at bottom of score container */
.inspection-status-label {
    font-size: clamp(1.25rem, 5vw, 1.75rem);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    transition: color 0.3s ease;
    /* Absolute positioning for perfect centering below score */
    position: absolute;
    bottom: 15%;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1;
    white-space: nowrap;
}

.inspection-status-label.status-healthy {
    color: var(--status-healthy);
}

.inspection-status-label.status-uncertain {
    color: var(--status-warning);
}

.inspection-status-label.status-faulty {
    color: var(--status-error);
}

/* Abstract pulse animation for analysis feedback */
.inspection-pulse-animation {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    pointer-events: none;
}

.inspection-pulse-ring {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    border-radius: 50%;
    border: 2px solid currentColor;
    opacity: 0;
    animation: inspection-pulse 2s ease-out infinite;
}

.inspection-pulse-ring:nth-child(1) { animation-delay: 0s; }
.inspection-pulse-ring:nth-child(2) { animation-delay: 0.5s; }
.inspection-pulse-ring:nth-child(3) { animation-delay: 1s; }

@keyframes inspection-pulse {
    0% {
        width: 40%;
        height: 40%;
        opacity: 0.6;
    }
    100% {
        width: 100%;
        height: 100%;
        opacity: 0;
    }
}

.inspection-score-container.status-healthy .inspection-pulse-ring {
    color: var(--status-healthy);
}

.inspection-score-container.status-uncertain .inspection-pulse-ring {
    color: var(--status-warning);
}

.inspection-score-container.status-faulty .inspection-pulse-ring {
    color: var(--status-error);
}

/* Reference state info */
.inspection-reference-info {
    font-size: 0.875rem;
    color: var(--text-muted);
    text-align: center;
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-card);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
    max-width: 100%;
}

.inspection-reference-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 0.25rem;
    color: var(--text-muted);
}

.inspection-reference-value {
    color: var(--text-secondary);
    font-weight: 500;
}

/* Dynamic quality hints */
.inspection-hint {
    font-size: clamp(0.875rem, 3vw, 1rem);
    color: var(--text-secondary);
    text-align: center;
    padding: var(--spacing-sm) var(--spacing-md);
    background: rgba(255, 183, 77, 0.1);
    border-left: 3px solid var(--status-warning);
    border-radius: var(--radius-sm);
    animation: hint-pulse 2s ease-in-out infinite;
    max-width: 100%;
}

@keyframes hint-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.inspection-hint.hint-hidden {
    display: none;
}

/* Fixed footer with single STOP button - max 20% of viewport */
.inspection-footer {
    flex: 0 0 auto;
    max-height: 20vh;
    min-height: 70px;
    padding: var(--spacing-md) var(--spacing-md);
    padding-bottom: max(var(--spacing-md), env(safe-area-inset-bottom));
    background: var(--bg-secondary);
    border-top: 1px solid var(--divider-color);
    display: flex;
    align-items: center;
    justify-content: center;
}

.inspection-stop-btn {
    width: 100%;
    padding: var(--spacing-md) var(--spacing-lg);
    font-size: clamp(1.125rem, 4vw, 1.5rem);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    background: var(--accent-color);
    color: var(--bg-primary);
    border: none;
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 4px 20px rgba(255, 136, 0, 0.3);
    min-height: 56px;
    touch-action: manipulation;
}

.inspection-stop-btn:hover,
.inspection-stop-btn:focus {
    background: var(--accent-color);
    box-shadow: 0 6px 30px rgba(255, 136, 0, 0.5);
    transform: translateY(-2px);
    filter: brightness(1.1);
}

.inspection-stop-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 10px rgba(255, 136, 0, 0.4);
}

/* Initializing state - waiting animation */
.inspection-content.is-initializing .inspection-score-container {
    background: radial-gradient(circle, rgba(0, 212, 255, 0.1) 0%, rgba(0, 212, 255, 0.03) 70%, transparent 100%);
    box-shadow: 0 0 40px rgba(0, 212, 255, 0.15);
}

.inspection-content.is-initializing .inspection-score {
    color: var(--text-muted);
    animation: score-blink 1.5s ease-in-out infinite;
}

.inspection-content.is-initializing .inspection-status-label {
    color: var(--text-muted);
}

.inspection-content.is-initializing .inspection-pulse-ring {
    color: var(--primary-color);
}

@keyframes score-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
}

/* ===================================
   TEST UI SCALE - RESPONSIVE SCALING
   Reduces UI to ~75% on small devices (iPhone SE, etc.)
   =================================== */

/* Small viewport: reduce scale to 75% */
/* Triggers on: iPhone SE (375x667), small Android devices */
@media (max-width: 400px), (max-height: 650px) {
    :root {
        --test-ui-scale: 0.75;
    }
}

/* Medium-small viewport: slight reduction to 85% */
@media (min-width: 401px) and (max-width: 480px) and (min-height: 651px) {
    :root {
        --test-ui-scale: 0.85;
    }
}

/* Scaled Inspection Header */
.inspection-header {
    min-height: calc(80px * var(--test-ui-scale));
    padding: calc(var(--spacing-md) * var(--test-ui-scale)) var(--spacing-md);
}

.inspection-question {
    font-size: clamp(calc(1.1rem * var(--test-ui-scale)), calc(5vw * var(--test-ui-scale)), calc(1.5rem * var(--test-ui-scale)));
    margin-bottom: calc(var(--spacing-xs) * var(--test-ui-scale));
}

.inspection-subtitle {
    font-size: clamp(calc(0.75rem * var(--test-ui-scale)), calc(3vw * var(--test-ui-scale)), calc(0.875rem * var(--test-ui-scale)));
}

.inspection-machine-name {
    font-size: calc(0.75rem * var(--test-ui-scale));
    margin-top: calc(var(--spacing-xs) * var(--test-ui-scale));
}

/* Scaled Content Area */
.inspection-content {
    padding: calc(var(--spacing-sm) * var(--test-ui-scale));
    gap: calc(var(--spacing-sm) * var(--test-ui-scale));
}

/* Scaled Score Container - the main visual element */
.inspection-score-container {
    width: clamp(calc(140px * var(--test-ui-scale)), calc(45vw * var(--test-ui-scale)), calc(220px * var(--test-ui-scale)));
    height: clamp(calc(140px * var(--test-ui-scale)), calc(45vw * var(--test-ui-scale)), calc(220px * var(--test-ui-scale)));
    max-width: min(calc(220px * var(--test-ui-scale)), 75%);
    max-height: min(calc(220px * var(--test-ui-scale)), 40vh);
}

/* Scaled Score Text */
.inspection-score {
    font-size: clamp(calc(3rem * var(--test-ui-scale)), calc(18vw * var(--test-ui-scale)), calc(5.5rem * var(--test-ui-scale)));
}

/* Scaled Status Label */
.inspection-status-label {
    font-size: clamp(calc(1rem * var(--test-ui-scale)), calc(4vw * var(--test-ui-scale)), calc(1.4rem * var(--test-ui-scale)));
    letter-spacing: calc(0.12em * var(--test-ui-scale));
    bottom: calc(12% * var(--test-ui-scale) + 3%);
}

/* Scaled Reference Info Box */
.inspection-reference-info {
    font-size: calc(0.8rem * var(--test-ui-scale));
    padding: calc(var(--spacing-xs) * var(--test-ui-scale)) calc(var(--spacing-sm) * var(--test-ui-scale));
    border-radius: calc(var(--radius-sm) * var(--test-ui-scale));
}

.inspection-reference-label {
    font-size: calc(0.7rem * var(--test-ui-scale));
    margin-bottom: calc(0.2rem * var(--test-ui-scale));
}

/* Scaled Quality Hint */
.inspection-hint {
    font-size: clamp(calc(0.75rem * var(--test-ui-scale)), calc(2.5vw * var(--test-ui-scale)), calc(0.875rem * var(--test-ui-scale)));
    padding: calc(var(--spacing-xs) * var(--test-ui-scale)) calc(var(--spacing-sm) * var(--test-ui-scale));
    border-radius: calc(var(--radius-xs) * var(--test-ui-scale));
}

/* Scaled Footer - keeping touch target accessible */
.inspection-footer {
    min-height: calc(60px * var(--test-ui-scale));
    padding: calc(var(--spacing-sm) * var(--test-ui-scale)) var(--spacing-md);
    padding-bottom: max(calc(var(--spacing-sm) * var(--test-ui-scale)), env(safe-area-inset-bottom));
}

/* Scaled Stop Button - min 44px touch target maintained */
.inspection-stop-btn {
    padding: calc(var(--spacing-sm) * var(--test-ui-scale)) calc(var(--spacing-md) * var(--test-ui-scale));
    font-size: clamp(calc(1rem * var(--test-ui-scale)), calc(3.5vw * var(--test-ui-scale)), calc(1.25rem * var(--test-ui-scale)));
    letter-spacing: calc(0.12em * var(--test-ui-scale));
    border-radius: calc(var(--radius-md) * var(--test-ui-scale));
    min-height: max(44px, calc(50px * var(--test-ui-scale))); /* Ensure touch target */
}

/* ===================================
   ADVANCED/EXPERT DIAGNOSIS VIEW
   Same 20/60/20 layout with structured middle section
   =================================== */

/* Transform recording-modal into diagnosis layout for advanced/expert */
.diagnosis-active #recording-modal .modal-content {
    max-width: var(--content-max-width);
    max-height: 100%;
    height: 100dvh;
    width: 100%;
    border-radius: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    margin: 0 auto;
}

/* Header for advanced/expert view - max 20% */
.diagnosis-active #recording-modal .modal-header {
    flex: 0 0 auto;
    max-height: 20vh;
    min-height: 60px;
    padding: var(--spacing-sm) var(--spacing-md);
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.diagnosis-active #recording-modal .modal-header h3 {
    font-size: clamp(1rem, 4vw, 1.25rem);
    margin-bottom: 0.125rem;
}

.diagnosis-active #recording-modal .modal-subtitle {
    font-size: clamp(0.75rem, 2.5vw, 0.875rem);
}

/* Middle content for advanced/expert - structured into thirds */
.diagnosis-active #recording-modal .modal-body {
    flex: 1 1 60vh;
    min-height: 0;
    overflow: hidden; /* Default: no scroll for advanced */
    display: flex;
    flex-direction: column;
    padding: var(--spacing-sm);
    gap: var(--spacing-sm);
}

/* Expert view: body stays hidden — scrollable-area handles scrolling */
[data-view-level="expert"] .diagnosis-active #recording-modal .modal-body {
    overflow: hidden;
}

/* Footer for advanced/expert view - max 20% */
.diagnosis-active #recording-modal .modal-actions {
    flex: 0 0 auto;
    max-height: 20vh;
    min-height: 60px;
    padding: var(--spacing-sm) var(--spacing-md);
    padding-bottom: max(var(--spacing-sm), env(safe-area-inset-bottom));
    display: flex;
    align-items: center;
    justify-content: center;
}

/* === DASHBOARD HEADER: Question text === */
.diagnosis-header {
    text-align: center;
    padding: var(--spacing-xs) var(--spacing-sm);
    flex: 0 0 auto;
}

.diagnosis-header h3 {
    font-size: clamp(0.9rem, 3.5vw, 1.1rem);
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

/* === DASHBOARD GRID: Camera (left) + Score (right) === */
.diagnosis-dashboard-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    flex: 0 1 auto;
    min-height: 120px;
    align-items: center;
}

/* Left panel: Camera */
.dashboard-left-cam {
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

.dashboard-left-cam .diagnosis-middle-camera {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
}

.dashboard-left-cam .ghost-overlay-container {
    width: 100%;
    max-width: 240px;
    margin: 0 auto;
}

/* Reserve space before video loads so grid doesn't collapse */
.dashboard-left-cam .ghost-overlay-wrapper {
    position: relative; /* Enable absolute positioning for children */
    aspect-ratio: 4/3;
    min-height: 100px;
    background: rgba(255, 255, 255, 0.03);
    overflow: hidden;
    border-radius: var(--radius-md);
}

/* Video element: Full size within wrapper */
#diagnosis-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Ghost overlay image: Semi-transparent overlay on top of video */
.ghost-overlay-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.7; /* 70% transparent for better visibility - increased from 0.5 */
    pointer-events: none; /* Allow interaction with video underneath */
    z-index: 1; /* Ensure overlay is on top of video */
}

/* Right panel: Score */
.dashboard-right-score {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
}

/* Score container in dashboard - same style as simplified view */
.dashboard-right-score .inspection-score-container {
    width: clamp(120px, 30vw, 180px);
    height: clamp(120px, 30vw, 180px);
    max-width: none;
    max-height: none;
}

.dashboard-right-score .inspection-score {
    font-size: clamp(2.5rem, 12vw, 4rem);
}

.dashboard-right-score .inspection-score-unit {
    font-size: 0.4em;
}

/* Status label below score in dashboard */
.dashboard-right-score .inspection-status {
    font-size: clamp(0.85rem, 2.5vw, 1rem);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    text-align: center;
    color: var(--text-secondary);
    transition: color 0.3s ease;
}

.dashboard-right-score .inspection-status.status-healthy {
    color: var(--status-healthy);
}

.dashboard-right-score .inspection-status.status-uncertain {
    color: var(--status-warning);
}

.dashboard-right-score .inspection-status.status-faulty {
    color: var(--status-error);
}

/* Reference info text */
.dashboard-right-score .inspection-ref-info {
    font-size: 0.8rem;
    color: var(--text-muted);
    text-align: center;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* === SCROLLABLE AREA: Dashboard grid + Spectrum + Expert debug === */
/* Takes all remaining space below the header and scrolls as one unit */
.diagnosis-scrollable-area {
    flex: 1 1 0;
    min-height: 0;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

/* Spectrum container inside scrollable area */
.diagnosis-spectrum-container {
    flex: 0 0 auto;
    min-height: 80px;
    max-height: 120px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.diagnosis-spectrum-container #waveform-canvas {
    width: 100%;
    height: 100%;
    min-height: 70px;
    max-height: 110px;
    margin: 0;
}

/* === EXPERT STATS PANEL (inside scrollable area) === */
.expert-stats-panel {
    display: none;
    flex-direction: column;
    gap: var(--spacing-sm);
    padding-top: var(--spacing-sm);
    border-top: 1px solid var(--divider-color);
}

[data-view-level="expert"] .expert-stats-panel {
    display: flex;
    background: rgba(255, 255, 255, 0.02);
    border-radius: 8px;
    border: 1px solid var(--divider-color);
    padding: var(--spacing-sm);
}

/* Expert mode: larger spectrum for frequency analysis */
[data-view-level="expert"] .diagnosis-spectrum-container {
    min-height: 100px;
    max-height: 160px;
}

[data-view-level="expert"] .diagnosis-spectrum-container #waveform-canvas {
    min-height: 90px;
    max-height: 150px;
}

/* Expert mode: more spacing between sections */
[data-view-level="expert"] .diagnosis-scrollable-area {
    gap: var(--spacing-md, 1.5rem);
}

/* === DIAGNOSIS CONTROLS: Stop button === */
.diagnosis-controls {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-sm) 0;
}

.diagnosis-controls #stop-diagnosis-btn {
    min-width: 120px;
    font-size: 1rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

/* Reference model info - compact */
.diagnosis-active .reference-model-info {
    font-size: 0.85rem;
    padding: var(--spacing-xs) var(--spacing-sm);
    margin: 0;
}

/* Debug info - compact for expert */
.diagnosis-active .debug-info {
    font-size: 0.8rem;
    font-family: var(--font-mono);
    padding: var(--spacing-xs) var(--spacing-sm);
    margin: 0;
}

/* Debug info: tabular layout for key-value pairs */
.diagnosis-active .debug-info > div {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    padding: 2px 0;
}

/* Debug info: RAW SCORE highlight */
.diagnosis-active .debug-info > div#debug-raw-score {
    font-size: 1rem;
    color: var(--text-primary);
    margin-top: 4px;
    padding-top: 4px;
    border-top: 1px solid var(--divider-color);
}

/* === OPERATING POINT MONITOR (Expert Mode) === */
.op-monitor {
    display: flex;
    flex-direction: column;
    gap: 0;
    padding: var(--spacing-sm);
    background: rgba(255, 255, 255, 0.02);
    border-radius: 8px;
    border: 1px solid var(--divider-color);
    font-size: 0.85rem;
}

.op-monitor-header {
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: var(--spacing-xs);
}

.op-monitor-row {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 6px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
}

.op-monitor-row:last-of-type {
    border-bottom: none;
}

.op-monitor-light {
    flex: 0 0 12px;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-top: 2px;
    background-color: var(--text-muted);
    transition: background-color 0.3s ease;
    box-shadow: 0 0 4px currentColor;
}

.op-monitor-value {
    flex: 0 0 65px;
    font-weight: 700;
    font-size: 0.85rem;
    color: var(--text-primary);
    font-variant-numeric: tabular-nums;
    font-family: var(--font-mono);
}

.op-monitor-text {
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    gap: 1px;
    min-width: 0;
}

.op-monitor-label {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.8rem;
}

.op-monitor-desc {
    color: var(--text-muted);
    font-size: 0.7rem;
    line-height: 1.3;
}

.op-monitor-banner {
    margin-top: var(--spacing-xs);
    padding: 6px 10px;
    background-color: rgba(255, 193, 7, 0.12);
    border: 1px solid rgba(255, 193, 7, 0.3);
    border-radius: 6px;
    color: var(--color-warning, #FFC107);
    font-size: 0.8rem;
    font-weight: 500;
    text-align: center;
    transition: opacity 0.3s ease, max-height 0.3s ease;
    max-height: 60px;
    opacity: 1;
}

.op-monitor-banner--hidden {
    opacity: 0;
    max-height: 0;
    padding: 0;
    margin: 0;
    border: none;
    overflow: hidden;
}

.op-monitor-init-banner {
    padding: 6px 10px;
    margin-bottom: var(--spacing-xs);
    background-color: rgba(33, 150, 243, 0.10);
    border: 1px solid rgba(33, 150, 243, 0.25);
    border-radius: 6px;
    color: rgba(33, 150, 243, 0.9);
    font-size: 0.8rem;
    font-weight: 500;
    text-align: center;
    transition: opacity 0.3s ease, max-height 0.3s ease;
    max-height: 60px;
    opacity: 1;
    animation: op-init-pulse 1.5s ease-in-out infinite;
}

.op-monitor-init-banner--hidden {
    opacity: 0;
    max-height: 0;
    padding: 0;
    margin: 0;
    border: none;
    overflow: hidden;
    animation: none;
}

@keyframes op-init-pulse {
    0%, 100% { opacity: 0.7; }
    50% { opacity: 1; }
}

/* --- Operating Point Monitor: Clickable rows --- */
.op-monitor-row {
    cursor: pointer;
    user-select: none;
    -webkit-user-select: none;
    transition: background-color 0.2s ease;
    border-radius: 4px;
    padding: 6px 4px 6px 0;
}

.op-monitor-row:active {
    background-color: rgba(255, 255, 255, 0.04);
}

.op-monitor-row--expanded {
    background-color: rgba(255, 255, 255, 0.03);
}

.op-monitor-row--warning .op-monitor-value {
    color: var(--color-warning, #FFC107);
}

.op-monitor-row--critical .op-monitor-value {
    color: var(--color-faulty, #F44336);
}

/* --- Tap hint arrow --- */
.op-monitor-tap-hint {
    display: none;
    font-size: 0.65rem;
    color: var(--text-muted);
    margin-left: 4px;
    opacity: 0.6;
}

/* --- Tooltip (Progressive Disclosure) --- */
.op-monitor-tooltip {
    padding: 8px 12px;
    margin: 0 0 4px 18px;
    background-color: rgba(255, 255, 255, 0.04);
    border-left: 2px solid var(--text-muted);
    border-radius: 0 6px 6px 0;
    font-size: 0.75rem;
    line-height: 1.4;
    color: var(--text-secondary);
    transition: opacity 0.2s ease, max-height 0.3s ease;
    max-height: 200px;
    opacity: 1;
    overflow: hidden;
}

.op-monitor-tooltip--hidden {
    opacity: 0;
    max-height: 0;
    padding: 0 12px;
    margin: 0 0 0 18px;
    border-left-color: transparent;
    overflow: hidden;
}

.op-monitor-tooltip-warning {
    color: var(--color-warning, #FFC107);
    font-weight: 600;
    margin-bottom: 6px;
    font-size: 0.75rem;
    line-height: 1.4;
}

.op-monitor-tooltip-explain {
    color: var(--text-muted);
    font-size: 0.7rem;
    line-height: 1.4;
}

/* --- Score Invalidation (Expert Mode) --- */
.op-score-invalidated {
    opacity: 0.35;
    filter: grayscale(60%);
    transition: opacity 0.3s ease, filter 0.3s ease;
}

.op-invalid-badge {
    text-align: center;
    padding: 4px 12px;
    margin-top: 4px;
    background-color: rgba(255, 152, 0, 0.15);
    border: 1px solid rgba(255, 152, 0, 0.4);
    border-radius: 6px;
    color: var(--color-warning, #FF9800);
    font-size: 0.8rem;
    font-weight: 600;
    animation: op-invalid-pulse 2s ease-in-out infinite;
}

@keyframes op-invalid-pulse {
    0%, 100% { opacity: 0.7; }
    50% { opacity: 1; }
}

/* Hide elements that should only show in specific views */
.diagnosis-active .recording-timer {
    display: none;
}

/* Hide ghost overlay hint in advanced and expert mode */
html[data-view-level="advanced"] .ghost-overlay-hint,
html[data-view-level="expert"] .ghost-overlay-hint {
    display: none;
}

/* === BASIC MODE: Vertical stacked layout (Camera above, Score below) ===
   Only affects basic view level in the inspection modal.
   Advanced/Expert keep the side-by-side 2-column layout.
   Goal: Fill the mobile screen with camera on top (~55%) and score below (~45%). */

html[data-view-level="basic"] .inspection-content {
    justify-content: stretch;
    gap: var(--spacing-sm);
    padding: var(--spacing-xs) var(--spacing-sm);
}

html[data-view-level="basic"] .diagnosis-dashboard-grid {
    grid-template-columns: 1fr;
    grid-template-rows: 1.2fr 1fr;
    flex: 1 1 0;
    min-height: 0;
    gap: var(--spacing-sm);
}

/* Camera: fill the top cell, let video scale within */
html[data-view-level="basic"] .dashboard-left-cam {
    min-height: 0;
    overflow: hidden;
}

html[data-view-level="basic"] .dashboard-left-cam .diagnosis-middle-camera {
    height: 100%;
}

html[data-view-level="basic"] .dashboard-left-cam .ghost-overlay-container {
    max-width: 100%;
    width: 100%;
    height: 100%;
}

html[data-view-level="basic"] .dashboard-left-cam .ghost-overlay-wrapper {
    width: 100%;
    height: 100%;
    aspect-ratio: auto;
}

/* Score: larger circle and text for prominent display */
html[data-view-level="basic"] .dashboard-right-score {
    justify-content: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-xs);
}

html[data-view-level="basic"] .dashboard-right-score .inspection-score-container {
    width: clamp(130px, 30vw, 200px);
    height: clamp(130px, 30vw, 200px);
}

html[data-view-level="basic"] .dashboard-right-score .inspection-score {
    font-size: clamp(2.5rem, 12vw, 4.5rem);
}

html[data-view-level="basic"] .dashboard-right-score .inspection-status {
    font-size: clamp(0.85rem, 3vw, 1.1rem);
}

html[data-view-level="basic"] .dashboard-right-score .inspection-ref-info {
    font-size: 0.7rem;
}

/* === MOBILE: Keep side-by-side grid, shrink elements to fit === */
@media (max-width: 600px) {
    .diagnosis-dashboard-grid {
        gap: var(--spacing-xs);
    }

    .dashboard-left-cam .ghost-overlay-container {
        max-width: 150px;
    }

    .dashboard-right-score .inspection-score-container {
        width: clamp(90px, 28vw, 140px);
        height: clamp(90px, 28vw, 140px);
    }

    .dashboard-right-score .inspection-score {
        font-size: clamp(1.75rem, 9vw, 2.5rem);
    }

    .dashboard-right-score .inspection-status {
        font-size: clamp(0.6rem, 2vw, 0.8rem);
    }

    .dashboard-right-score .inspection-ref-info {
        font-size: 0.6rem;
    }

    .dashboard-right-score {
        gap: var(--spacing-xs);
        padding: var(--spacing-xs);
    }
}

/* Responsive adjustments for short screens */
@media (max-height: 600px) {
    .dashboard-left-cam .ghost-overlay-container {
        max-width: 130px;
    }

    .diagnosis-spectrum-container {
        min-height: 60px;
        max-height: 80px;
    }

    .diagnosis-spectrum-container #waveform-canvas {
        min-height: 50px;
        max-height: 70px;
    }

    .dashboard-right-score .inspection-score-container {
        width: 80px;
        height: 80px;
    }

    .dashboard-right-score .inspection-score {
        font-size: 1.5rem;
    }

    .dashboard-right-score .inspection-status {
        font-size: 0.6rem;
    }

    .diagnosis-header h3 {
        font-size: 0.8rem;
    }
}

/* ===================================
   TEST UI SCALE - ADVANCED/EXPERT VIEW
   Applies same scaling to diagnosis view
   =================================== */

/* Scaled Header for advanced/expert view */
.diagnosis-active #recording-modal .modal-header {
    min-height: calc(60px * var(--test-ui-scale));
    padding: calc(var(--spacing-sm) * var(--test-ui-scale)) var(--spacing-md);
}

.diagnosis-active #recording-modal .modal-header h3 {
    font-size: clamp(calc(0.9rem * var(--test-ui-scale)), calc(4vw * var(--test-ui-scale)), calc(1.15rem * var(--test-ui-scale)));
}

.diagnosis-active #recording-modal .modal-subtitle {
    font-size: clamp(calc(0.7rem * var(--test-ui-scale)), calc(2.5vw * var(--test-ui-scale)), calc(0.8rem * var(--test-ui-scale)));
}

/* Scaled Body for advanced/expert view */
.diagnosis-active #recording-modal .modal-body {
    padding: calc(var(--spacing-xs) * var(--test-ui-scale));
    gap: calc(var(--spacing-xs) * var(--test-ui-scale));
}

/* Scaled Footer for advanced/expert view */
.diagnosis-active #recording-modal .modal-actions {
    min-height: calc(55px * var(--test-ui-scale));
    padding: calc(var(--spacing-xs) * var(--test-ui-scale)) var(--spacing-md);
    padding-bottom: max(calc(var(--spacing-xs) * var(--test-ui-scale)), env(safe-area-inset-bottom));
}

/* Scaled Dashboard Grid */
.diagnosis-dashboard-grid {
    gap: calc(1rem * var(--test-ui-scale));
}

/* Scaled Camera Section */
.dashboard-left-cam .ghost-overlay-container {
    max-width: calc(240px * var(--test-ui-scale));
}

/* Scaled Spectrum Section */
.diagnosis-spectrum-container #waveform-canvas {
    min-height: calc(60px * var(--test-ui-scale));
    max-height: calc(100px * var(--test-ui-scale));
}

/* Scaled Score Display in Dashboard */
.dashboard-right-score .inspection-score-container {
    width: clamp(calc(100px * var(--test-ui-scale)), calc(25vw * var(--test-ui-scale)), calc(150px * var(--test-ui-scale)));
    height: clamp(calc(100px * var(--test-ui-scale)), calc(25vw * var(--test-ui-scale)), calc(150px * var(--test-ui-scale)));
}

.dashboard-right-score .inspection-score {
    font-size: clamp(calc(2rem * var(--test-ui-scale)), calc(10vw * var(--test-ui-scale)), calc(3.5rem * var(--test-ui-scale)));
}

.dashboard-right-score .inspection-status {
    font-size: calc(0.9rem * var(--test-ui-scale));
}

.dashboard-right-score .inspection-ref-info {
    font-size: calc(0.8rem * var(--test-ui-scale));
}

/* Scaled Expert Stats Panel */
.expert-stats-panel {
    gap: calc(var(--spacing-xs) * var(--test-ui-scale));
    padding: calc(var(--spacing-sm) * var(--test-ui-scale));
    margin-top: calc(var(--spacing-xs) * var(--test-ui-scale));
}

/* Scaled Reference Model Info */
.diagnosis-active .reference-model-info {
    font-size: calc(0.85rem * var(--test-ui-scale));
    padding: calc(var(--spacing-xs) * var(--test-ui-scale)) calc(var(--spacing-sm) * var(--test-ui-scale));
}

/* Scaled Debug Info */
.diagnosis-active .debug-info {
    font-size: calc(0.8rem * var(--test-ui-scale));
    padding: calc(var(--spacing-xs) * var(--test-ui-scale)) calc(var(--spacing-sm) * var(--test-ui-scale));
}

/* Scaled Diagnosis Header */
.diagnosis-header h3 {
    font-size: clamp(calc(0.8rem * var(--test-ui-scale)), calc(3vw * var(--test-ui-scale)), calc(1rem * var(--test-ui-scale)));
}

/* Scaled Diagnosis Controls */
.diagnosis-controls {
    padding: calc(var(--spacing-xs) * var(--test-ui-scale)) 0;
}

/* ===================================
   NFC WRITER
   =================================== */
.nfc-writer-actions {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    margin-top: var(--spacing-sm);
}

.nfc-availability-hint {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin: 0;
}

.nfc-option-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    margin: var(--spacing-md) 0;
}

.nfc-option {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
    background: var(--bg-card);
}

.nfc-option input {
    margin-top: 0.2rem;
    accent-color: var(--primary-color);
}

.nfc-option-text {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
}

.nfc-option-title {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text-primary);
}

.nfc-option-detail {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.nfc-option input:disabled + .nfc-option-text {
    opacity: 0.6;
}

.nfc-status {
    min-height: 1.5rem;
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-xs);
}

.nfc-status.status-success {
    color: var(--status-healthy);
}

.nfc-status.status-error {
    color: var(--status-error);
}

.nfc-hint {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin: 0;
}

/* NFC Customer ID Section (Variante B) */
.nfc-customer-id-section {
    margin: var(--spacing-md) 0;
    padding: var(--spacing-md);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
}

.nfc-customer-id-label {
    display: block;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-xs);
}

.nfc-customer-id-description {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin: 0 0 var(--spacing-sm) 0;
    line-height: 1.4;
}

.nfc-customer-id-input {
    width: 100%;
    padding: var(--spacing-sm);
    font-size: 0.9rem;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    background: var(--bg-input);
    color: var(--text-primary);
    box-sizing: border-box;
}

.nfc-customer-id-input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.2);
}

.nfc-customer-id-input::placeholder {
    color: var(--text-muted);
}

.nfc-db-url-preview {
    font-size: 0.7rem;
    color: var(--primary-color);
    margin: var(--spacing-xs) 0 0 0;
    word-break: break-all;
    font-family: monospace;
    padding: var(--spacing-xs);
    background: rgba(var(--primary-rgb), 0.1);
    border-radius: var(--radius-sm);
}

/* ===================================
   QR CODE GENERATOR
   =================================== */

.qr-preview-container {
    margin-top: var(--spacing-md);
    text-align: center;
}

.qr-canvas-wrapper {
    display: flex;
    justify-content: center;
    padding: var(--spacing-md);
    background: #ffffff;
    border-radius: var(--radius-md);
    margin: var(--spacing-sm) 0;
}

.qr-canvas-wrapper canvas {
    max-width: 200px;
    max-height: 200px;
    width: 100%;
    height: auto;
}

.qr-url-preview {
    font-size: 0.7rem;
    color: var(--text-muted);
    word-break: break-all;
    font-family: monospace;
    padding: var(--spacing-xs);
    background: rgba(var(--primary-rgb), 0.08);
    border-radius: var(--radius-xs);
    margin-bottom: var(--spacing-xs);
    text-align: left;
}

.qr-url-preview::before {
    content: '';
    display: inline;
    font-weight: 600;
    color: var(--text-secondary);
}

.qr-label-info {
    font-size: var(--font-xs);
    color: var(--text-secondary);
    margin-top: var(--spacing-xs);
    line-height: 1.4;
}

/* QR Print Area - Hidden on screen, visible only when printing */
.qr-print-area {
    display: none;
}

.qr-print-label {
    width: 80mm;
    margin: 0 auto;
    padding: 6mm;
    text-align: center;
    border: 1px dashed #ccc;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    color: #000;
    background: #fff;
    page-break-inside: avoid;
}

.qr-print-header {
    font-size: 14pt;
    font-weight: 700;
    margin-bottom: 3mm;
    color: #000;
}

.qr-print-label canvas {
    max-width: 50mm;
    max-height: 50mm;
    width: 100%;
    height: auto;
    margin: 2mm auto;
}

.qr-print-details {
    font-size: 9pt;
    line-height: 1.5;
    margin-top: 2mm;
    color: #333;
}

.qr-print-details strong {
    color: #000;
}

.qr-print-footer {
    font-size: 7pt;
    color: #999;
    margin-top: 3mm;
    border-top: 1px solid #eee;
    padding-top: 2mm;
}

/* ===================================
   DEEP LINK OVERLAY
   =================================== */
.deep-link-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    z-index: var(--z-modal);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-lg);
}

.deep-link-card {
    background: var(--bg-modal);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-sm);
    box-shadow: var(--shadow-lg), var(--glow-primary);
    text-align: center;
}

.deep-link-spinner {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 3px solid rgba(255, 255, 255, 0.2);
    border-top-color: var(--primary-color);
    animation: spin 0.9s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* ===================================
   ACCENT BUTTONS (Record & Stop)
   Per UX-Spec: Orange accent for critical actions
   =================================== */
#record-btn {
    background: var(--accent-color);
    color: var(--bg-primary);
    border-color: var(--accent-color);
    font-weight: 700;
    box-shadow: 0 0 20px rgba(255, 136, 0, 0.3);
}

#record-btn:hover {
    background: var(--accent-color);
    color: var(--bg-primary);
    box-shadow: 0 0 30px rgba(255, 136, 0, 0.5);
    filter: brightness(1.1);
}

#stop-recording-btn {
    background: var(--accent-color);
    color: var(--bg-primary);
    border: 2px solid var(--accent-color);
    font-weight: 700;
    box-shadow: 0 0 20px rgba(255, 136, 0, 0.3);
}

#stop-recording-btn:hover {
    background: var(--accent-color);
    box-shadow: 0 0 30px rgba(255, 136, 0, 0.5);
    filter: brightness(1.1);
}

/* Save Reference Button - Primary Color */
#save-reference-btn {
    background: var(--primary-color);
    color: var(--bg-primary);
    border: none;
}

/* ===================================
   PWA INSTALL BUTTON
   =================================== */
.pwa-install-button {
    display: none; /* Hidden by default, shown when PWA is installable */
    align-items: center;
    gap: var(--spacing-xs);
    padding: 0.625rem 1.25rem;
    background: var(--primary-color);
    color: var(--bg-primary);
    border: none;
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: var(--glow-primary);
    white-space: nowrap;
    margin-left: auto;
}

.pwa-install-button:hover {
    background: var(--primary-hover);
    box-shadow: var(--glow-strong);
    transform: translateY(-2px);
}

.pwa-install-button:active {
    transform: translateY(0);
}

.pwa-install-button svg {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
}

.pwa-install-button span {
    font-weight: 600;
}

/* Mobile responsive */
@media (max-width: 768px) {
    .pwa-install-button {
        padding: 0.5rem 1rem;
        font-size: 0.8125rem;
    }

    .pwa-install-button svg {
        width: 18px;
        height: 18px;
    }
}

@media (max-width: 480px) {
    .pwa-install-button span {
        display: none; /* Hide text on very small screens */
    }

    .pwa-install-button {
        padding: 0.625rem;
        border-radius: 50%;
        width: 42px;
        height: 42px;
        justify-content: center;
    }
}

/* ===================================
   ANIMATIONS
   =================================== */
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes slideUp {
    from {
        transform: translateY(20px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes slideDown {
    from {
        opacity: 0;
        max-height: 0;
    }
    to {
        opacity: 1;
        max-height: 2000px;
    }
}

@keyframes slideInDown {
    from {
        transform: translateY(-20px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.7;
    }
}

/* ===================================
   RESPONSIVE UTILITIES
   =================================== */
@media (max-width: 639px) {
    .brand-title {
        font-size: 1.5rem;
    }

    .welcome-title {
        font-size: 1.25rem;
    }

    .card-grid {
        gap: var(--spacing-sm);
    }

    .action-card {
        padding: var(--spacing-md);
    }

    .modal-actions {
        flex-direction: column;
    }
}

/* ===================================
   ACCESSIBILITY
   =================================== */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Focus styles for keyboard navigation */
button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}

/* ===================================
   SCANNER MODAL
   =================================== */
.scanner-modal-content {
    max-width: 600px;
    width: 100%;
    display: flex;
    flex-direction: column;
    max-height: 90vh;
}

.scanner-modal-content .modal-body {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
}

.scanner-modal-content .modal-actions {
    flex-shrink: 0;
}

.scanner-container {
    position: relative;
    width: 100%;
    max-width: 500px;
    margin: 0 auto;
    border-radius: var(--radius-lg);
    overflow: hidden;
    background: var(--bg-tertiary);
}

#qr-reader {
    width: 100%;
    border-radius: var(--radius-lg);
    overflow: hidden;
}

#qr-reader video {
    width: 100%;
    height: auto;
    display: block;
    border-radius: var(--radius-lg);
}

/* Hide html5-qrcode library built-in UI to prevent overlap with custom overlay */
#qr-reader__scan_region > img,
#qr-reader__dashboard,
#qr-reader__dashboard_section,
#qr-reader__dashboard_section_csr,
#qr-reader__dashboard_section_swaplink,
#qr-reader__header_message {
    display: none !important;
}

#qr-reader > div:not(:first-child) {
    display: none !important;
}

.scanner-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    pointer-events: none;
    z-index: 10;
    padding: var(--spacing-md);
}

.scanner-frame {
    position: relative;
    width: 220px;
    height: 220px;
    margin-bottom: var(--spacing-xl);
    flex-shrink: 0;
}

.scanner-corner {
    position: absolute;
    width: 40px;
    height: 40px;
    border: 3px solid var(--primary-color);
    box-shadow: var(--glow-primary);
}

.corner-tl {
    top: 0;
    left: 0;
    border-right: none;
    border-bottom: none;
    border-top-left-radius: var(--radius-md);
}

.corner-tr {
    top: 0;
    right: 0;
    border-left: none;
    border-bottom: none;
    border-top-right-radius: var(--radius-md);
}

.corner-bl {
    bottom: 0;
    left: 0;
    border-right: none;
    border-top: none;
    border-bottom-left-radius: var(--radius-md);
}

.corner-br {
    bottom: 0;
    right: 0;
    border-left: none;
    border-top: none;
    border-bottom-right-radius: var(--radius-md);
}

.scanner-hint {
    color: #ffffff;
    font-size: 0.8rem;
    font-weight: 600;
    text-align: center;
    padding: var(--spacing-sm) var(--spacing-lg);
    background: rgba(0, 0, 0, 0.85);
    border-radius: var(--radius-md);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
    max-width: 80%;
    line-height: 1.4;
    z-index: 11;
}

.scanner-error {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-xl);
    text-align: center;
    gap: var(--spacing-md);
}

.scanner-error svg {
    margin-bottom: var(--spacing-sm);
}

.scanner-error p {
    color: var(--text-primary);
    font-size: 1rem;
    font-weight: 600;
}

.scanner-error-hint {
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-weight: 400;
    max-width: 350px;
}

.scanner-success {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-xl);
    text-align: center;
    gap: var(--spacing-md);
    animation: fadeIn 0.3s ease-out;
}

.scanner-success svg {
    animation: scaleIn 0.4s ease-out;
}

.scanner-success p {
    color: var(--status-healthy);
    font-size: 1.25rem;
    font-weight: 600;
}

@keyframes scaleIn {
    from {
        transform: scale(0);
        opacity: 0;
    }
    to {
        transform: scale(1);
        opacity: 1;
    }
}

/* Mobile responsive */
@media (max-width: 640px) {
    .scanner-frame {
        width: 180px;
        height: 180px;
    }

    .scanner-corner {
        width: 30px;
        height: 30px;
    }

    .scanner-hint {
        font-size: 0.7rem;
        padding: var(--spacing-xs) var(--spacing-md);
        max-width: 90%;
    }
}

/* ===================================
   THEME SWITCHER (Header Quick Toggle)
   =================================== */
.theme-switcher {
    width: 44px;
    height: 44px;
    border: 2px solid var(--border-color);
    border-radius: var(--radius-md);
    background: var(--bg-card);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    color: var(--primary-color);
}

.theme-switcher:hover {
    background: var(--bg-tertiary);
    border-color: var(--primary-color);
    box-shadow: var(--glow-primary);
    transform: translateY(-2px);
}

.theme-switcher:active {
    transform: translateY(0) scale(0.95);
}

.theme-switcher svg {
    transition: transform 0.3s ease;
}

.theme-switcher:hover svg {
    transform: rotate(30deg);
}

/* ===================================
   THEME SELECTION (Settings)
   =================================== */
.setting-category {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.setting-category-title {
    font-size: 1rem;
    font-weight: 700;
    color: var(--primary-color);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin: 0;
    padding-bottom: var(--spacing-xs);
    border-bottom: 2px solid var(--border-color);
}

.settings-divider {
    height: 1px;
    background: linear-gradient(
        to right,
        transparent,
        var(--divider-color) 20%,
        var(--divider-color) 80%,
        transparent
    );
    margin: var(--spacing-md) 0;
}

.theme-cards {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.theme-card {
    background: var(--bg-tertiary);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    position: relative;
    overflow: hidden;
}

.theme-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(
        to right,
        var(--primary-color),
        var(--accent-color)
    );
    opacity: 0;
    transition: opacity 0.3s ease;
}

.theme-card:hover {
    border-color: var(--primary-color);
    background: var(--bg-card);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md), var(--glow-primary);
}

.theme-card:hover::before {
    opacity: 1;
}

.theme-card.active {
    border-color: var(--primary-color);
    background: var(--bg-card);
    box-shadow: var(--shadow-lg), var(--glow-strong);
}

.theme-card.active::before {
    opacity: 1;
}

.theme-card.active::after {
    content: '✓';
    position: absolute;
    top: var(--spacing-sm);
    right: var(--spacing-sm);
    width: 28px;
    height: 28px;
    background: var(--primary-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--bg-primary);
    font-weight: 700;
    font-size: 1rem;
    box-shadow: var(--glow-primary);
}

.theme-card-icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-color);
}

.theme-card-content {
    flex: 1;
}

.theme-card-title {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 var(--spacing-xs) 0;
}

.theme-card-description {
    font-size: 0.875rem;
    color: var(--text-secondary);
    line-height: 1.5;
    margin: 0;
}

.theme-card-colors {
    display: flex;
    gap: var(--spacing-xs);
    margin-top: var(--spacing-sm);
}

.theme-color-dot {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    border: 2px solid var(--bg-primary);
    box-shadow: var(--shadow-sm);
    transition: transform 0.2s ease;
}

.theme-card:hover .theme-color-dot {
    transform: scale(1.15);
}

/* Banner Preview in Settings */
.banner-preview-container {
    width: 100%;
    max-width: 100%;
    border-radius: var(--radius-md);
    overflow: hidden;
    background: var(--bg-tertiary);
    border: 2px solid var(--border-color);
    aspect-ratio: 1024 / 400;
    display: flex;
    align-items: center;
    justify-content: center;
}

.banner-preview-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    display: block;
}

.banner-actions {
    display: flex;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
}

.banner-actions .action-btn {
    flex: 1;
    min-width: 140px;
}

.setting-category-description {
    font-size: 0.875rem;
    color: var(--text-secondary);
    line-height: 1.5;
    margin: 0;
}

.setting-description {
    font-size: 0.8125rem;
    color: var(--text-muted);
    line-height: 1.4;
    margin: 0;
    font-style: italic;
}

/* Database/Settings Stats */
.setting-stats {
    font-size: 0.875rem;
    color: var(--text-secondary);
    line-height: 1.6;
    margin: 0;
}

.setting-stats strong {
    color: var(--text-primary);
    font-weight: 600;
}

/* Data Management */
.data-management-card {
    background: var(--bg-card);
    backdrop-filter: blur(10px);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
}

.data-management-actions {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.data-management-stats {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.data-management-stats-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-primary);
    text-transform: uppercase;
    letter-spacing: 0.04em;
}

.data-management-stat-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: var(--spacing-sm);
}

.data-management-stat {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    gap: 0.2rem;
}

.data-management-stat-value {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
}

.data-management-stat-label {
    font-size: 0.75rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.04em;
}

.data-management-danger {
    border-top: 1px solid var(--border-color);
    padding-top: var(--spacing-md);
}

@media (min-width: 1024px) {
    .data-management-actions {
        flex-direction: row;
        flex-wrap: wrap;
    }

    .data-management-actions .action-btn {
        flex: 1 1 auto;
        min-width: 180px;
    }
}

/* Responsive Theme Cards */
@media (min-width: 768px) {
    .theme-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: var(--spacing-md);
    }
}

/* ===================================
   REVIEW MODAL (Phase 2)
   =================================== */
.review-audio-player {
    margin-bottom: var(--spacing-lg);
}

.review-reference-image {
    margin-bottom: var(--spacing-lg);
}

.review-image-frame {
    width: 100%;
    border-radius: var(--radius-md);
    overflow: hidden;
    border: 1px solid var(--border-color);
    background: var(--bg-tertiary);
}

.review-image-frame img {
    display: block;
    width: 100%;
    height: auto;
}

@media (max-width: 600px) {
    .review-image-frame {
        height: 60vh;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .review-image-frame img {
        width: auto;
        height: 100%;
        max-width: 100%;
        object-fit: contain;
    }
}

.review-section-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 var(--spacing-md) 0;
}

.review-info {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin: var(--spacing-xs) 0 0 0;
    text-align: center;
}

.review-quality {
    margin-top: var(--spacing-lg);
}

/* Quality Indicator (Traffic Light) */
.quality-indicator {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    margin-bottom: var(--spacing-md);
}

.quality-icon {
    flex-shrink: 0;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    font-size: 1.5rem;
}

/* Traffic Light Colors */
.quality-icon.good {
    background: rgba(34, 197, 94, 0.2);
    color: #22c55e;
    box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
}

.quality-icon.ok {
    background: rgba(234, 179, 8, 0.2);
    color: #eab308;
    box-shadow: 0 0 20px rgba(234, 179, 8, 0.3);
}

.quality-icon.bad {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
    box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
}

.quality-details {
    flex: 1;
}

.quality-score {
    font-size: 1rem;
    color: var(--text-primary);
    margin: 0 0 var(--spacing-xs) 0;
}

.quality-score strong {
    font-size: 1.25rem;
    color: var(--primary-color);
}

.quality-rating {
    font-size: 0.875rem;
    margin: 0;
}

.quality-rating.good {
    color: #22c55e;
}

.quality-rating.ok {
    color: #eab308;
}

.quality-rating.bad {
    color: #ef4444;
}

/* Quality Issues */
.quality-issues {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
}

.quality-issues h5 {
    font-size: 0.875rem;
    font-weight: 600;
    color: #ef4444;
    margin: 0 0 var(--spacing-sm) 0;
}

.quality-issues ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.quality-issues li {
    font-size: 0.875rem;
    color: var(--text-secondary);
    padding: var(--spacing-xs) 0;
    padding-left: var(--spacing-md);
    position: relative;
}

.quality-issues li:before {
    content: '•';
    position: absolute;
    left: 0;
    color: #ef4444;
}

/* ===================================
   HARDWARE INTELLIGENCE
   =================================== */

/* Hardware Info Card */
.hardware-info-card {
    background: var(--bg-card);
    backdrop-filter: blur(10px);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-top: var(--spacing-lg);
}

.hardware-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.hardware-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.hardware-content {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.hardware-status {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-md);
}

.hardware-icon {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.hardware-info {
    flex: 1;
    min-width: 0;
}

.hardware-device {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.hardware-message {
    font-size: 0.8125rem;
    color: var(--text-secondary);
}

/* Microphone Selection Modal */
.microphone-modal-content {
    max-width: 600px;
    width: 100%;
}

.modal-description {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-md);
    line-height: 1.5;
}

/* Legal Modals (Impressum, Datenschutz, Über Zanobot) */
.legal-modal-content {
    max-width: 700px;
    max-height: 85vh;
    width: 100%;
}

.legal-modal-body {
    max-height: 60vh;
    overflow-y: auto;
}

.legal-modal-body h4 {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--primary-color);
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-sm);
}

.legal-modal-body h4:first-child {
    margin-top: 0;
}

.legal-modal-body h5 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-top: var(--spacing-md);
    margin-bottom: var(--spacing-xs);
}

.legal-modal-body p {
    font-size: 0.9375rem;
    line-height: 1.6;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-md);
}

.legal-modal-body ul,
.legal-modal-body ol {
    font-size: 0.9375rem;
    line-height: 1.6;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-lg);
}

.legal-modal-body li {
    margin-bottom: var(--spacing-xs);
}

.legal-modal-body strong {
    color: var(--text-primary);
}

.legal-footer {
    margin-top: var(--spacing-lg);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--divider-color);
    font-size: 0.875rem;
    color: var(--text-muted);
}

.about-hero {
    text-align: center;
    margin-bottom: var(--spacing-lg);
    padding-bottom: var(--spacing-lg);
    border-bottom: 1px solid var(--divider-color);
}

.about-hero svg {
    margin-bottom: var(--spacing-md);
}

.about-hero h4 {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: var(--spacing-xs);
    margin-top: 0;
}

.about-subtitle {
    font-size: 0.875rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 0;
}

.about-version {
    margin-top: var(--spacing-lg);
    padding-top: var(--spacing-lg);
    border-top: 1px solid var(--divider-color);
    background: var(--bg-tertiary);
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
}

.about-version p {
    margin-bottom: var(--spacing-xs);
    font-size: 0.875rem;
}

.about-version p:last-child {
    margin-bottom: 0;
}

.microphone-device-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    max-height: 400px;
    overflow-y: auto;
    padding: 2px; /* Prevent box-shadow clipping */
}

.microphone-device-item {
    background: var(--bg-tertiary);
    border: 2px solid transparent;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
}

.microphone-device-item:hover {
    background: var(--bg-secondary);
    border-color: var(--primary-color);
    box-shadow: var(--glow-primary);
}

.microphone-device-item.selected {
    border-color: var(--primary-color);
    background: rgba(var(--primary-color-rgb, 0, 212, 255), 0.1);
}

.device-info {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    flex: 1;
    min-width: 0;
}

.device-icon {
    flex-shrink: 0;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.device-icon.status-good {
    background: rgba(0, 230, 118, 0.15);
    color: var(--status-healthy);
}

.device-icon.status-warning {
    background: rgba(255, 183, 77, 0.15);
    color: var(--status-warning);
}

.device-details {
    flex: 1;
    min-width: 0;
}

.device-name {
    font-size: 0.9375rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.device-status {
    font-size: 0.8125rem;
    color: var(--text-secondary);
}

.device-checkmark {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Responsive Adjustments */
@media (max-width: 768px) {
    .hardware-info-card {
        padding: var(--spacing-sm);
    }

    .hardware-status {
        flex-direction: column;
        gap: var(--spacing-sm);
    }

    .device-info {
        flex-direction: column;
        align-items: flex-start;
    }

    .device-icon {
        width: 32px;
        height: 32px;
    }
}

/* Small displays (mobile): Better text wrapping for hardware info */
@media (max-width: 400px) {
    .hardware-device {
        white-space: normal;
        overflow: visible;
        text-overflow: unset;
        word-break: break-word;
        hyphens: auto;
    }

    .hardware-message {
        white-space: normal;
        word-break: break-word;
    }

    .hardware-info-card .action-btn {
        font-size: 0.75rem;
        padding: var(--spacing-xs) var(--spacing-sm);
    }

}

/* ===================================
   VIEW LEVEL SYSTEM
   Controls UI complexity for different user types:
   - basic: Simple interface for operators
   - advanced: More details for supervisors
   - expert: Full technical details for engineers
   =================================== */

/* View Level Selector (Segmented Button) */
.view-level-selector {
    display: flex;
    gap: 0;
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: 4px;
    margin-top: var(--spacing-sm);
    overflow: hidden;
}

.view-level-btn {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: var(--spacing-sm) var(--spacing-xs);
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.2s ease;
    color: var(--text-muted);
    min-width: 0;
}

.view-level-btn:hover {
    background: var(--bg-secondary);
    color: var(--text-secondary);
}

.view-level-btn.active {
    background: var(--primary-color);
    color: var(--bg-primary);
    box-shadow: var(--shadow-sm);
}

.view-level-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
}

.view-level-icon svg {
    width: 20px;
    height: 20px;
}

.view-level-label {
    font-size: 0.8rem;
    font-weight: 600;
    white-space: normal;
    text-align: center;
    line-height: 1.1;
}

.view-level-desc {
    font-size: 0.65rem;
    opacity: 0.7;
    text-align: center;
}

/* Setting category description text */
.setting-category-description {
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: var(--spacing-xs);
    line-height: 1.4;
}

/* ===================================
   ROOM MEASUREMENT (Standalone T60)
   =================================== */

/* Measure Button */
.room-measure-btn {
    width: 100%;
    padding: 12px 16px;
    font-size: 1rem;
    font-weight: 600;
    border: 2px solid var(--primary-color);
    border-radius: var(--radius-md, 8px);
    background: transparent;
    color: var(--primary-color);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.2s ease;
}

.room-measure-btn:hover:not(:disabled) {
    background: var(--primary-color);
    color: var(--bg-primary, #0a0a0f);
}

.room-measure-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Progress bar */
.room-measure-progress-bar-container {
    width: 100%;
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
    margin: 8px 0;
}

.room-measure-progress-bar {
    height: 100%;
    background: var(--primary-color);
    border-radius: 3px;
    transition: width 0.3s ease;
}

.room-measure-progress-text {
    font-size: 0.8rem;
    text-align: center;
    opacity: 0.7;
    margin: 4px 0;
}

/* T60 value display */
.room-measure-value {
    text-align: center;
    margin: 12px 0 8px;
}

.room-measure-t60 {
    font-size: 2.5rem;
    font-weight: 700;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    letter-spacing: -0.02em;
}

.room-measure-unit {
    font-size: 1.2rem;
    opacity: 0.6;
    margin-left: 2px;
}

/* Visual scale */
.room-measure-scale {
    margin: 12px 0;
    padding: 0 4px;
}

.room-measure-scale-bar {
    position: relative;
    width: 100%;
    height: 12px;
    border-radius: 6px;
    background: linear-gradient(to right,
        #10b981 0%,
        #10b981 12%,
        #84cc16 20%,
        #f59e0b 40%,
        #f97316 60%,
        #ef4444 80%,
        #dc2626 100%
    );
}

.room-measure-scale-marker {
    position: absolute;
    top: -4px;
    width: 4px;
    height: 20px;
    background: white;
    border-radius: 2px;
    box-shadow: 0 0 4px rgba(0, 0, 0, 0.5);
    transition: left 0.5s ease;
}

.room-measure-scale-labels {
    display: flex;
    justify-content: space-between;
    font-size: 0.6rem;
    opacity: 0.5;
    margin-top: 4px;
    padding: 0 2px;
}

/* Classification text */
.room-measure-classification {
    text-align: center;
    font-size: 0.9rem;
    font-weight: 600;
    margin: 4px 0 8px;
}

.room-measure-classification.rm-status-healthy { color: var(--status-healthy, #10b981); }
.room-measure-classification.rm-status-uncertain { color: var(--status-warning, #f59e0b); }
.room-measure-classification.rm-status-warning { color: #f97316; }
.room-measure-classification.rm-status-faulty { color: var(--status-error, #ef4444); }

/* T60 value coloring */
.room-measure-t60.rm-status-healthy { color: var(--status-healthy, #10b981); }
.room-measure-t60.rm-status-uncertain { color: var(--status-warning, #f59e0b); }
.room-measure-t60.rm-status-warning { color: #f97316; }
.room-measure-t60.rm-status-faulty { color: var(--status-error, #ef4444); }

/* Details (Expert only) */
.room-measure-details {
    font-size: 0.75rem;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    opacity: 0.6;
    text-align: center;
    margin-top: 8px;
}

.room-measure-details p {
    margin: 2px 0;
}

/* Error message */
.room-measure-error-text {
    color: var(--status-error, #ef4444);
    font-size: 0.85rem;
    text-align: center;
    padding: 8px;
    white-space: pre-line;
    margin: 0;
}

/* Responsive */
@media (max-width: 360px) {
    .room-measure-t60 { font-size: 2rem; }
    .room-measure-scale-labels { font-size: 0.55rem; }
}

/* Light theme adjustments for view level selector */
[data-theme="light"] .view-level-selector {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
}

[data-theme="light"] .view-level-btn.active {
    background: var(--primary-color);
    color: #ffffff;
}

/* Brand theme adjustments for view level selector (light theme) */
[data-theme="brand"] .view-level-selector {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
}

[data-theme="brand"] .view-level-btn.active {
    background: var(--primary-color);
    color: #ffffff;
}

/* ===================================
   VIEW LEVEL VISIBILITY RULES
   Elements with data-view-level attribute
   are hidden based on current view level
   =================================== */

/* Default: Hide advanced and expert elements (exclude html element itself) */
:not(html)[data-view-level="advanced"],
:not(html)[data-view-level="expert"] {
    display: none !important;
}

/* Basic Mode (default) - Only basic elements visible */
html[data-view-level="basic"] [data-view-level="advanced"],
html[data-view-level="basic"] [data-view-level="expert"] {
    display: none !important;
}

/* Advanced Mode - Basic + Advanced elements visible */
html[data-view-level="advanced"] [data-view-level="advanced"] {
    display: revert !important;
}

html[data-view-level="advanced"] [data-view-level="expert"] {
    display: none !important;
}

/* Expert Mode - All elements visible */
html[data-view-level="expert"] [data-view-level="advanced"],
html[data-view-level="expert"] [data-view-level="expert"] {
    display: revert !important;
}

/* Fix for block containers with data-view-level */
html[data-view-level="advanced"] .setting-item[data-view-level="advanced"],
html[data-view-level="expert"] .setting-item[data-view-level="advanced"],
html[data-view-level="expert"] .setting-item[data-view-level="expert"] {
    display: block !important;
}

html[data-view-level="advanced"] .setting-category[data-view-level="advanced"],
html[data-view-level="expert"] .setting-category[data-view-level="advanced"],
html[data-view-level="expert"] .setting-category[data-view-level="expert"] {
    display: block !important;
}

html[data-view-level="advanced"] .input-group[data-view-level="advanced"],
html[data-view-level="expert"] .input-group[data-view-level="advanced"],
html[data-view-level="expert"] .input-group[data-view-level="expert"] {
    display: block !important;
}

html[data-view-level="advanced"] .machine-selection-option[data-view-level="advanced"],
html[data-view-level="expert"] .machine-selection-option[data-view-level="advanced"],
html[data-view-level="expert"] .machine-selection-option[data-view-level="expert"] {
    display: block !important;
}

html[data-view-level="advanced"] .hardware-info-card[data-view-level="advanced"],
html[data-view-level="expert"] .hardware-info-card[data-view-level="advanced"],
html[data-view-level="expert"] .hardware-info-card[data-view-level="expert"] {
    display: block !important;
}

html[data-view-level="advanced"] .result-barcode[data-view-level="advanced"],
html[data-view-level="expert"] .result-barcode[data-view-level="advanced"],
html[data-view-level="expert"] .result-barcode[data-view-level="expert"] {
    display: flex !important;
}

html[data-view-level="advanced"] .result-quality[data-view-level="advanced"],
html[data-view-level="expert"] .result-quality[data-view-level="advanced"],
html[data-view-level="expert"] .result-quality[data-view-level="expert"] {
    display: block !important;
}

html[data-view-level="advanced"] .result-analysis[data-view-level="expert"],
html[data-view-level="expert"] .result-analysis[data-view-level="expert"] {
    display: block !important;
}

html[data-view-level="advanced"] .result-confidence[data-view-level="advanced"],
html[data-view-level="expert"] .result-confidence[data-view-level="advanced"],
html[data-view-level="expert"] .result-confidence[data-view-level="expert"] {
    display: block !important;
}

html[data-view-level="expert"] .debug-info[data-view-level="expert"] {
    display: block !important;
}

/* Settings dividers with view-level visibility */
html[data-view-level="advanced"] .settings-divider[data-view-level="advanced"],
html[data-view-level="expert"] .settings-divider[data-view-level="advanced"],
html[data-view-level="expert"] .settings-divider[data-view-level="expert"] {
    display: block !important;
}

/* Responsive adjustments for view level selector */
@media (max-width: 480px) {
    .view-level-selector {
        flex-direction: row;
    }

    .view-level-btn {
        padding: var(--spacing-xs);
    }

    .view-level-label {
        font-size: 0.7rem;
    }

    .view-level-desc {
        display: none;
    }
}

/* ===================================
   LIVE HEALTH SCORE DISPLAY
   Prominent, color-coded health score during diagnosis
   =================================== */

.live-score-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--spacing-lg) var(--spacing-md);
    margin: var(--spacing-md) 0;
}

.live-hint {
    font-size: 0.8rem;
    color: var(--text-muted);
    text-align: center;
    margin: 0 0 var(--spacing-md) 0;
    padding: 8px 16px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--primary-color);
}

.live-score-display {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 180px;
    height: 180px;
    border-radius: 50%;
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.03), rgba(0, 0, 0, 0.1));
    box-shadow:
        0 0 0 4px rgba(255, 255, 255, 0.05),
        0 0 30px rgba(0, 0, 0, 0.3),
        inset 0 2px 10px rgba(0, 0, 0, 0.2);
    margin-bottom: var(--spacing-md);
    transition: box-shadow 0.3s ease, border-color 0.3s ease;
}

/* Score ring indicator */
.live-score-ring {
    position: absolute;
    top: -6px;
    left: -6px;
    right: -6px;
    bottom: -6px;
    border-radius: 50%;
    border: 4px solid transparent;
    border-top-color: var(--score-color, var(--text-muted));
    border-right-color: var(--score-color, var(--text-muted));
    opacity: 0.8;
    transition: border-color 0.3s ease, transform 0.3s ease;
}

.live-score-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin: 0 0 4px 0;
}

.live-score {
    font-size: 3.5rem;
    font-weight: 700;
    line-height: 1;
    margin: 0;
    font-variant-numeric: tabular-nums;
    transition: color 0.3s ease;
    color: var(--score-color, var(--text-primary));
    /* Optical centering: position relative so unit can be absolute */
    position: relative;
    display: inline-block;
}

.live-score-unit {
    /* Absolute positioning so % sign doesn't shift number off-center */
    position: absolute;
    top: 50%;
    transform: translateY(-65%);
    font-size: 1.2rem;
    font-weight: 400;
    color: var(--text-muted);
    margin-left: 2px;
}

.live-status {
    font-size: 0.85rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    margin: var(--spacing-sm) 0 0 0;
    padding: 6px 16px;
    border-radius: var(--radius-sm);
    background: rgba(255, 255, 255, 0.05);
    transition: color 0.3s ease, background-color 0.3s ease;
}

/* Color states - Healthy (Green) */
.live-score-display.score-healthy {
    --score-color: var(--status-healthy);
    box-shadow:
        0 0 0 4px rgba(0, 230, 118, 0.15),
        0 0 40px rgba(0, 230, 118, 0.2),
        inset 0 2px 10px rgba(0, 0, 0, 0.2);
}

.live-score-display.score-healthy .live-score-ring {
    border-top-color: var(--status-healthy);
    border-right-color: var(--status-healthy);
    border-bottom-color: var(--status-healthy);
}

.live-status.status-healthy {
    color: var(--status-healthy);
    background: rgba(0, 230, 118, 0.1);
}

/* Color states - Uncertain (Yellow/Orange) */
.live-score-display.score-uncertain {
    --score-color: var(--status-uncertain);
    box-shadow:
        0 0 0 4px rgba(255, 167, 38, 0.15),
        0 0 40px rgba(255, 167, 38, 0.2),
        inset 0 2px 10px rgba(0, 0, 0, 0.2);
}

.live-score-display.score-uncertain .live-score-ring {
    border-top-color: var(--status-uncertain);
    border-right-color: var(--status-uncertain);
}

.live-status.status-uncertain {
    color: var(--status-uncertain);
    background: rgba(255, 167, 38, 0.1);
}

/* Color states - Faulty (Red) */
.live-score-display.score-faulty {
    --score-color: var(--status-error);
    box-shadow:
        0 0 0 4px rgba(255, 82, 82, 0.15),
        0 0 40px rgba(255, 82, 82, 0.2),
        inset 0 2px 10px rgba(0, 0, 0, 0.2);
}

.live-score-display.score-faulty .live-score-ring {
    border-top-color: var(--status-error);
    border-right-color: var(--status-error);
}

.live-status.status-faulty {
    color: var(--status-error);
    background: rgba(255, 82, 82, 0.1);
}

/* Pulse animation for active diagnosis */
@keyframes score-pulse {
    0%, 100% {
        transform: scale(1);
        opacity: 0.8;
    }
    50% {
        transform: scale(1.02);
        opacity: 1;
    }
}

.live-score-display.is-active .live-score-ring {
    animation: score-pulse 2s ease-in-out infinite;
}

/* Responsive adjustments */
@media (max-width: 380px) {
    .live-score-display {
        width: 150px;
        height: 150px;
    }

    .live-score {
        font-size: 2.8rem;
    }

    .live-score-unit {
        font-size: 1rem;
    }
}


/* ===================================
   MACHINE SETUP FORM (NFC/Service)
   =================================== */
.machine-setup-form {
    display: flex;
    flex-direction: column;
    gap: var(--space-lg);
}

.machine-setup-form .form-section {
    background: var(--background-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
}

.machine-setup-form .form-section-title {
    color: var(--text-primary);
    font-size: var(--font-md);
    font-weight: 600;
    margin: 0 0 var(--space-md) 0;
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.machine-setup-form .form-group {
    margin-bottom: var(--space-md);
}

.machine-setup-form .form-group.required label {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.machine-setup-form .required-badge {
    background: var(--status-faulty);
    color: white;
    font-size: var(--font-xs);
    padding: 2px 6px;
    border-radius: var(--radius-sm);
    font-weight: 500;
}

.machine-setup-form label {
    display: block;
    color: var(--text-secondary);
    font-size: var(--font-sm);
    margin-bottom: var(--space-xs);
}

.machine-setup-form .form-input {
    width: 100%;
    padding: var(--space-sm) var(--space-md);
    background: var(--background-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    color: var(--text-primary);
    font-size: var(--font-sm);
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.machine-setup-form .form-input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.2);
}

.machine-setup-form .form-input.input-error {
    border-color: var(--status-faulty);
    box-shadow: 0 0 0 2px rgba(255, 68, 68, 0.2);
}

.machine-setup-form .form-textarea {
    resize: vertical;
    min-height: 80px;
}

.machine-setup-form .form-hint {
    color: var(--text-muted);
    font-size: var(--font-xs);
    margin-top: var(--space-xs);
    font-style: italic;
}

.machine-setup-form .form-error {
    color: var(--status-faulty);
    font-size: var(--font-xs);
    margin-top: var(--space-xs);
    display: none;
}

.machine-setup-form .nfc-link-section {
    border-top: 1px solid var(--border-color);
    padding-top: var(--space-md);
    margin-top: var(--space-md);
}

.machine-setup-form .nfc-link-display {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    background: var(--background-primary);
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
}

.machine-setup-form .nfc-link-display code {
    flex: 1;
    color: var(--primary-color);
    font-size: var(--font-xs);
    word-break: break-all;
    font-family: monospace;
}

.machine-setup-form .copy-link-btn {
    background: transparent;
    border: none;
    padding: var(--space-xs);
    cursor: pointer;
    color: var(--text-secondary);
    border-radius: var(--radius-sm);
    transition: color 0.2s ease, background 0.2s ease;
}

.machine-setup-form .copy-link-btn:hover {
    color: var(--primary-color);
    background: var(--background-secondary);
}

/* Service Technician Fields (Expert Mode) */
.service-tech-fields {
    margin-top: var(--space-md);
    padding-top: var(--space-md);
}

.service-tech-fields .option-divider {
    margin-bottom: var(--space-md);
}

.input-hint {
    color: var(--text-muted);
    font-size: var(--font-xs);
    margin-top: var(--space-xs);
    font-style: italic;
    line-height: 1.4;
}

.machine-textarea {
    resize: vertical;
    min-height: 60px;
    font-family: inherit;
}

/* ===================================
   NFC IMPORT MODAL
   =================================== */
.nfc-import-modal .modal-content {
    max-width: 500px;
    width: 90%;
}

.nfc-import-modal .modal-header.error {
    background: var(--status-critical);
    color: white;
}

.nfc-import-modal .modal-header.error h3 {
    color: white;
}

.nfc-import-modal .modal-body {
    padding: var(--spacing-lg);
}

.import-warning {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: rgba(255, 152, 0, 0.1);
    border: 1px solid var(--status-warning);
    border-radius: var(--radius-sm);
    margin-bottom: var(--spacing-lg);
}

.import-warning svg {
    flex-shrink: 0;
    color: var(--status-warning);
}

.import-warning p {
    margin: 0;
    color: var(--text-primary);
    font-weight: 500;
}

.import-comparison {
    display: flex;
    align-items: stretch;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.import-column {
    flex: 1;
    padding: var(--spacing-md);
    background: var(--bg-secondary);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border-color);
}

.import-column h4 {
    margin: 0 0 var(--spacing-sm) 0;
    font-size: var(--font-sm);
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.import-column ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.import-column li {
    padding: var(--spacing-xs) 0;
    color: var(--text-primary);
}

.import-column li strong {
    color: var(--accent);
    font-variant-numeric: tabular-nums;
}

.import-column.import-new {
    border-color: var(--status-healthy);
    background: rgba(76, 175, 80, 0.05);
}

.import-column.import-new li strong {
    color: var(--status-healthy);
}

.import-arrow {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: var(--text-secondary);
    padding: 0 var(--spacing-sm);
}

.export-date {
    margin-top: var(--spacing-sm);
    font-size: var(--font-xs);
    color: var(--text-secondary);
}

.import-error {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: var(--spacing-lg);
}

.import-error svg {
    margin-bottom: var(--spacing-md);
}

.import-error .error-message {
    color: var(--text-primary);
    white-space: pre-wrap;
    line-height: 1.6;
    margin: 0;
}

.nfc-import-modal .modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: var(--spacing-md);
    padding: var(--spacing-md) var(--spacing-lg);
    border-top: 1px solid var(--border-color);
}

.nfc-import-modal .btn {
    padding: var(--spacing-sm) var(--spacing-lg);
    border-radius: var(--radius-sm);
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.nfc-import-modal .btn-secondary {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
}

.nfc-import-modal .btn-secondary:hover {
    background: var(--bg-tertiary);
}

.nfc-import-modal .btn-primary {
    background: var(--accent);
    border: 1px solid var(--accent);
    color: white;
}

.nfc-import-modal .btn-primary:hover {
    filter: brightness(1.1);
}

.nfc-import-modal .btn-danger {
    background: var(--status-critical);
    border: 1px solid var(--status-critical);
    color: white;
}

.nfc-import-modal .btn-danger:hover {
    filter: brightness(1.1);
}

@media (max-width: 480px) {
    .import-comparison {
        flex-direction: column;
    }

    .import-arrow {
        transform: rotate(90deg);
        padding: var(--spacing-xs) 0;
    }
}

/* ===================================
   HISTORY CHART MODAL
   =================================== */
.history-chart-modal-content {
    max-width: 1000px;
    width: 95%;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
}

.history-chart-modal-content .modal-header {
    flex-shrink: 0;
}

.history-chart-modal-content .modal-header h3 {
    font-weight: 700;
}

.history-chart-modal-content .modal-body {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
}

.history-chart-modal-content .modal-actions {
    flex-shrink: 0;
}

.history-chart-info {
    display: flex;
    gap: var(--spacing-xl);
    padding: var(--spacing-lg);
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    margin-bottom: var(--spacing-lg);
    flex-wrap: wrap;
}

.history-chart-info-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    flex: 1;
    min-width: 150px;
}

.history-chart-info-item .info-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.history-chart-info-item .info-value {
    font-size: 1.125rem;
    color: var(--text-primary);
    font-weight: 600;
}

.history-chart-container {
    position: relative;
    width: 100%;
    height: 400px;
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

#history-chart-canvas {
    width: 100%;
    height: 100%;
    border-radius: var(--radius-sm);
    cursor: crosshair;
}

/* Responsive adjustments for history chart */
@media (max-width: 768px) {
    .history-chart-modal-content {
        width: 98%;
        max-height: 95vh;
    }

    .history-chart-container {
        height: 300px;
    }

    .history-chart-info {
        flex-direction: column;
        gap: var(--spacing-md);
    }

    .history-chart-info-item {
        min-width: 100%;
    }
}

@media (max-width: 480px) {
    .history-chart-container {
        height: 250px;
        padding: var(--spacing-sm);
    }
}

/* ===================================
   DIAGNOSE CARD STATE-BASED UI
   =================================== */

/* Container for state-based content */
.diagnose-state-content {
    padding: var(--spacing-md);
}

/* ----------------------------------------
   State B: No machine selected
   Horizontal 3-tile selection layout
   ---------------------------------------- */
.diagnose-tiles {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-sm);
    width: 100%;
}

/* Square touch tiles */
.diagnose-tile {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    aspect-ratio: 1;
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: var(--btn-transition);
    min-height: 90px;
}

.diagnose-tile:hover {
    background: var(--bg-secondary);
    border-color: var(--primary-color);
    transform: var(--hover-lift);
    box-shadow: var(--shadow-md);
}

.diagnose-tile:active {
    transform: var(--active-press);
}

.diagnose-tile-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    pointer-events: none; /* Clicks pass through to button */
}

.diagnose-tile-icon svg {
    color: var(--primary-color);
    stroke: var(--primary-color);
    pointer-events: none; /* Clicks pass through to button */
}

.diagnose-tile-label {
    font-size: var(--font-xs);
    font-weight: 500;
    color: var(--text-secondary);
    text-align: center;
    line-height: 1.2;
    pointer-events: none; /* Clicks pass through to button */
}

/* ----------------------------------------
   State A: Machine selected
   Ready to analyze
   ---------------------------------------- */
.diagnose-machine-info {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    margin-bottom: var(--spacing-md);
}

.diagnose-machine-details {
    flex: 1;
    min-width: 0;
}

.diagnose-machine-name {
    font-size: var(--font-xl);
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.diagnose-machine-meta {
    font-size: var(--font-sm);
    color: var(--text-muted);
    margin: var(--spacing-xs) 0 0 0;
}

.diagnose-change-machine-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    padding: 0;
    background: transparent;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    color: var(--text-muted);
    cursor: pointer;
    transition: var(--btn-transition);
    flex-shrink: 0;
    margin-left: var(--spacing-sm);
}

.diagnose-change-machine-btn:hover {
    background: var(--bg-secondary);
    border-color: var(--primary-color);
    color: var(--primary-color);
}

/* Main analyze button - dominant CTA */
.diagnose-main-btn {
    font-size: var(--font-lg);
    font-weight: 600;
    padding: var(--spacing-md) var(--spacing-xl);
    min-height: 56px;
    width: 100%;
}

/* ----------------------------------------
   Responsive: Tablet and larger
   ---------------------------------------- */
@media (min-width: 481px) {
    .diagnose-tile {
        min-height: 100px;
    }

    .diagnose-tile-icon svg {
        width: 44px;
        height: 44px;
    }

    .diagnose-tile-label {
        font-size: var(--font-sm);
    }
}

/* ----------------------------------------
   Responsive: Small screens
   Keep horizontal but tighter
   ---------------------------------------- */
@media (max-width: 480px) {
    .diagnose-tiles {
        gap: var(--spacing-xs);
    }

    .diagnose-tile {
        min-height: 80px;
        padding: var(--spacing-xs);
    }

    .diagnose-tile-icon svg {
        width: 32px;
        height: 32px;
    }

    .diagnose-tile-label {
        font-size: 0.65rem;
    }
}

/* ===================================
   AUTO-DETECTION STYLES
   Simplified "Zustand prüfen" flow with automatic machine recognition
   =================================== */

/* Primary auto-detect button section */
.auto-detect-primary {
    text-align: center;
    padding: var(--spacing-lg) var(--spacing-md);
}

.auto-detect-btn {
    width: 100%;
    max-width: 300px;
    padding: var(--spacing-md) var(--spacing-lg);
    font-size: 1.1rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    margin: 0 auto var(--spacing-sm);
    cursor: pointer;
    background: var(--primary-color);
    border: 2px solid var(--primary-color);
    color: var(--bg-primary);
    border-radius: var(--radius-md);
    transition: var(--btn-transition);
}

.auto-detect-btn:hover {
    box-shadow: var(--glow-strong);
    transform: var(--hover-scale);
}

.auto-detect-btn:active {
    transform: var(--active-press);
}

.auto-detect-btn svg,
.auto-detect-btn span {
    flex-shrink: 0;
    pointer-events: none;
}

/* CRITICAL: Force auto-detect button to always be clickable
   These rules override any JavaScript-applied disabled states */
#diagnose-auto-detect-btn {
    pointer-events: auto !important;
    cursor: pointer !important;
    opacity: 1 !important;
}

#diagnose-auto-detect-btn:disabled {
    /* Even when disabled attribute is set, keep it visually and functionally enabled */
    pointer-events: auto !important;
    cursor: pointer !important;
    opacity: 1 !important;
}

.auto-detect-hint {
    color: var(--text-muted);
    font-size: 0.85rem;
    margin: 0;
}

/* Manual selection toggle */
.manual-selection-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    width: 100%;
    padding: var(--spacing-sm) var(--spacing-md);
    background: transparent;
    border: none;
    color: var(--text-muted);
    font-size: 0.85rem;
    cursor: pointer;
    transition: color 0.2s ease;
}

/* CRITICAL: Force manual selection toggle to always be clickable */
#diagnose-show-manual-btn {
    pointer-events: auto !important;
    cursor: pointer !important;
    opacity: 1 !important;
}

#diagnose-show-manual-btn:disabled {
    pointer-events: auto !important;
    cursor: pointer !important;
    opacity: 1 !important;
}

/* CRITICAL: Force diagnose-tile buttons to always be clickable
   These tiles (QR scannen, Maschine wählen, Neue Maschine) must remain
   interactive regardless of phase lock state or overlay issues */
.diagnose-tile {
    pointer-events: auto !important;
    cursor: pointer !important;
    opacity: 1 !important;
}

.diagnose-tile:disabled {
    pointer-events: auto !important;
    cursor: pointer !important;
    opacity: 1 !important;
}

.manual-selection-toggle:hover {
    color: var(--text-primary);
}

.manual-selection-toggle .chevron-icon {
    transition: transform 0.2s ease;
}

.manual-selection-toggle .chevron-icon.rotated {
    transform: rotate(180deg);
}

/* Manual selection options container */
.manual-selection-options {
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-color);
    margin-top: var(--spacing-sm);
}

/* Auto-detect listening modal */
.auto-detect-modal .modal-content {
    background: var(--bg-modal);
    border-radius: var(--radius-lg);
    padding: var(--spacing-xl);
    max-width: 400px;
    width: 90%;
    text-align: center;
}

.auto-detect-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-md);
}

.auto-detect-visual {
    margin-bottom: var(--spacing-md);
}

.pulse-circle {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: var(--bg-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    animation: pulse-animation 1.5s ease-in-out infinite;
}

.pulse-circle svg {
    color: var(--primary-color);
}

.pulse-circle.is-analyzing {
    animation: pulse-fast 0.8s ease-in-out infinite;
    background: color-mix(in srgb, var(--primary-color) 20%, transparent);
}

@keyframes pulse-animation {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 var(--primary-color-alpha, rgba(74, 222, 222, 0.4));
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 0 0 15px transparent;
    }
}

@keyframes pulse-fast {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 var(--primary-color-alpha, rgba(74, 222, 222, 0.5));
    }
    50% {
        transform: scale(1.08);
        box-shadow: 0 0 0 10px transparent;
    }
}

.auto-detect-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.auto-detect-subtitle {
    color: var(--text-muted);
    font-size: 0.95rem;
    margin: 0;
}

/* Machine recognized modal (Fall A) */
.recognized-content {
    max-width: 400px;
    width: 90%;
    text-align: center;
    padding: var(--spacing-xl);
}

.recognized-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.recognized-icon {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.recognized-icon.status-healthy {
    background: color-mix(in srgb, var(--status-healthy) 15%, transparent);
    color: var(--status-healthy);
}

.recognized-icon.status-faulty {
    background: color-mix(in srgb, var(--status-faulty) 15%, transparent);
    color: var(--status-faulty);
}

.recognized-icon.status-uncertain {
    background: color-mix(in srgb, var(--status-uncertain) 15%, transparent);
    color: var(--status-uncertain);
}

.recognized-title {
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.recognized-info {
    margin-bottom: var(--spacing-lg);
}

.recognized-machine-name {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 var(--spacing-sm) 0;
}

.recognized-details {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    color: var(--text-muted);
    font-size: 0.9rem;
    margin-bottom: var(--spacing-md);
}

.recognized-similarity {
    font-weight: 600;
    color: var(--text-primary);
}

.recognized-status {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-full);
    font-weight: 600;
    font-size: 0.9rem;
}

.recognized-status.status-healthy {
    background: color-mix(in srgb, var(--status-healthy) 15%, transparent);
    color: var(--status-healthy);
}

.recognized-status.status-faulty {
    background: color-mix(in srgb, var(--status-faulty) 15%, transparent);
    color: var(--status-faulty);
}

.recognized-status.status-uncertain {
    background: color-mix(in srgb, var(--status-uncertain) 15%, transparent);
    color: var(--status-uncertain);
}

.recognized-actions {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

/* Candidate selection modal (Fall B) */
.candidate-content {
    max-width: 450px;
    width: 90%;
    padding: var(--spacing-lg);
}

.candidate-header {
    text-align: center;
    margin-bottom: var(--spacing-lg);
}

.candidate-header svg {
    margin-bottom: var(--spacing-sm);
}

.candidate-title {
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 var(--spacing-xs) 0;
}

.candidate-subtitle {
    color: var(--text-muted);
    font-size: 0.9rem;
    margin: 0;
}

.candidate-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-lg);
    max-height: 300px;
    overflow-y: auto;
}

.candidate-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-md);
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: left;
}

.candidate-item:hover {
    border-color: var(--primary-color);
    background: var(--bg-tertiary);
}

.candidate-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.candidate-name {
    font-weight: 600;
    color: var(--text-primary);
}

.candidate-similarity {
    font-size: 0.85rem;
    color: var(--text-muted);
}

.candidate-status {
    font-size: 0.8rem;
    font-weight: 500;
    padding: var(--spacing-xxs) var(--spacing-sm);
    border-radius: var(--radius-full);
}

.candidate-status.status-healthy {
    background: color-mix(in srgb, var(--status-healthy) 15%, transparent);
    color: var(--status-healthy);
}

.candidate-status.status-faulty {
    background: color-mix(in srgb, var(--status-faulty) 15%, transparent);
    color: var(--status-faulty);
}

.candidate-status.status-uncertain {
    background: color-mix(in srgb, var(--status-uncertain) 15%, transparent);
    color: var(--status-uncertain);
}

.candidate-item.candidate-new {
    border-style: dashed;
    color: var(--text-muted);
}

.candidate-item.candidate-new svg {
    color: var(--primary-color);
}

.candidate-actions {
    text-align: center;
}

/* No match modal (Fall C) */
.no-match-content {
    max-width: 400px;
    width: 90%;
    padding: var(--spacing-xl);
    text-align: center;
}

.no-match-header {
    margin-bottom: var(--spacing-lg);
}

.no-match-header svg {
    margin-bottom: var(--spacing-md);
    opacity: 0.6;
}

.no-match-title {
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 var(--spacing-sm) 0;
}

.no-match-subtitle {
    color: var(--text-muted);
    font-size: 0.95rem;
    margin: 0;
}

.no-match-actions {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.no-match-actions .modal-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
}

.modal-btn.btn-text {
    background: transparent;
    border: none;
    color: var(--text-muted);
    padding: var(--spacing-sm);
}

.modal-btn.btn-text:hover {
    color: var(--text-primary);
}

/* ===================================
   ZERO-FRICTION RECORDING STYLES
   =================================== */

/* Zero-friction record section */
.zero-friction-record {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    text-align: center;
}

.zero-friction-hint {
    font-size: var(--font-sm);
    color: var(--text-muted);
    margin: 0;
}

.zero-friction-btn {
    width: 100%;
    max-width: 280px;
}

/* Or divider between zero-friction and manual selection */
.reference-or-divider {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    margin: var(--spacing-md) 0;
    color: var(--text-muted);
    font-size: var(--font-sm);
}

.reference-or-divider::before,
.reference-or-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border-color, rgba(255, 255, 255, 0.1));
    max-width: 80px;
}

/* ===================================
   PRINT STYLES
   =================================== */
@media print {
    .header,
    .theme-switcher,
    .status-badge,
    .modal,
    .footer {
        display: none;
    }

    /* QR Code print layout */
    body.qr-printing .container,
    body.qr-printing .status-badge,
    body.qr-printing .header,
    body.qr-printing .footer,
    body.qr-printing .modal {
        display: none !important;
    }

    body.qr-printing .qr-print-area {
        display: block !important;
        position: static;
    }

    body.qr-printing {
        background: #fff !important;
        margin: 0;
        padding: 10mm;
    }
}

/* ===================================
   UX SPRINT 1: INPUT HINTS & VALIDATION
   =================================== */
.required-star {
    color: var(--status-error);
    margin-left: 2px;
    font-weight: 700;
}

.input-hint {
    display: block;
    font-size: var(--font-xs);
    color: var(--text-muted);
    margin-top: 4px;
    font-style: italic;
}

.input-error {
    display: none;
    font-size: var(--font-xs);
    color: var(--status-error);
    margin-top: 4px;
    font-weight: 500;
}

/* Default visual emphasis for required machine name field */
.input-group-required .machine-input {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.12);
    background: rgba(17, 40, 64, 0.75);
}

.input-group-required .machine-input.input-invalid {
    border-color: var(--status-error);
    box-shadow: 0 0 0 2px rgba(255, 82, 82, 0.2);
}

.input-group-required .machine-input:not(.input-invalid):focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.2);
}

/* Accessibility: visible focus for keyboard navigation */
.machine-input:focus-visible {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}

/* ===================================
   UX SPRINT 1: REFERENCE EXPLANATION
   =================================== */
.reference-explain-banner {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    background: rgba(0, 212, 255, 0.08);
    border-left: 3px solid var(--primary-color);
    border-radius: var(--radius-sm);
    margin-bottom: var(--spacing-md);
    font-size: var(--font-sm);
    color: var(--text-secondary);
    line-height: 1.5;
}

.reference-explain-banner .explain-icon {
    flex-shrink: 0;
    font-size: 1.2rem;
}

.recording-hint {
    font-size: var(--font-xs);
    color: var(--text-muted);
    text-align: center;
    padding: 6px 12px;
    margin-top: var(--spacing-xs);
    background: rgba(255, 255, 255, 0.05);
    border-radius: var(--radius-sm);
}

/* ===================================
   UX SPRINT 1: VERBAL SCORE STATUS
   =================================== */
.result-verbal-status {
    text-align: center;
    font-size: var(--font-md);
    font-weight: 600;
    margin-top: var(--spacing-xs);
    padding: 6px 16px;
    border-radius: var(--radius-pill);
    background: rgba(255, 255, 255, 0.05);
}

/* ===================================
   UX SPRINT 1: DELETE BUTTONS
   =================================== */
.machine-delete-btn {
    background: none;
    border: none;
    padding: 8px;
    color: var(--text-muted);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: color 0.2s, background 0.2s;
    flex-shrink: 0;
    -webkit-tap-highlight-color: transparent;
    min-width: 40px;
    min-height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.machine-delete-btn:hover,
.machine-delete-btn:active {
    color: var(--status-error);
    background: rgba(255, 82, 82, 0.1);
}

.machine-delete-btn:focus-visible,
.reference-delete-btn:focus-visible {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}

.reference-list-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-sm) var(--spacing-md);
    border-bottom: 1px solid var(--border-color);
}

.reference-list-item:last-child {
    border-bottom: none;
}

.reference-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.reference-name {
    font-size: var(--font-sm);
    font-weight: 500;
    color: var(--text-primary);
}

.reference-date {
    font-size: var(--font-xs);
    color: var(--text-muted);
}

.reference-delete-btn {
    background: none;
    border: none;
    padding: 6px;
    cursor: pointer;
    font-size: 1rem;
    min-width: 40px;
    min-height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-sm);
    transition: background 0.2s;
}

.reference-delete-btn:hover,
.reference-delete-btn:active {
    background: rgba(255, 82, 82, 0.1);
}

/* ══════════════════════════════════════════════════════════ */
/* UX Sprint 2: InfoBottomSheet                              */
/* ══════════════════════════════════════════════════════════ */

.bottomsheet-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0);
    z-index: 9000;
    transition: background 0.3s ease;
}

.bottomsheet-overlay-visible {
    background: rgba(0, 0, 0, 0.5);
}

.bottomsheet {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    max-height: 70vh;
    background: var(--bg-secondary, #0D1F31);
    border-top-left-radius: 16px;
    border-top-right-radius: 16px;
    z-index: 9001;
    transform: translateY(100%);
    transition: transform 0.3s cubic-bezier(0.32, 0.72, 0, 1);
    overflow-y: auto;
    box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.3);
}

.bottomsheet-visible {
    transform: translateY(0);
}

.bottomsheet-handle {
    width: 36px;
    height: 4px;
    background: var(--text-muted);
    border-radius: 2px;
    margin: 8px auto;
    opacity: 0.4;
}

.bottomsheet-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm, 8px);
    padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
    border-bottom: 1px solid var(--border-color, rgba(255, 255, 255, 0.08));
}

.bottomsheet-icon {
    font-size: 1.3rem;
    flex-shrink: 0;
}

.bottomsheet-title {
    flex: 1;
    font-size: var(--font-md, 1rem);
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.bottomsheet-close {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 1.2rem;
    cursor: pointer;
    padding: 8px;
    min-width: 40px;
    min-height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-sm, 4px);
}

.bottomsheet-close:hover {
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-primary);
}

.bottomsheet-close:focus-visible {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}

.bottomsheet-body {
    padding: var(--spacing-md, 16px);
    font-size: var(--font-sm, 0.875rem);
    color: var(--text-secondary);
    line-height: 1.6;
}

.bottomsheet-body p {
    margin: 0 0 var(--spacing-sm, 8px);
}

.bottomsheet-body p:last-child {
    margin-bottom: 0;
}

@supports (padding-bottom: env(safe-area-inset-bottom)) {
    .bottomsheet-body {
        padding-bottom: calc(var(--spacing-md, 16px) + env(safe-area-inset-bottom));
    }
}

/* ══════════════════════════════════════════════════════════ */
/* UX Sprint 2: Help Icon Buttons                            */
/* ══════════════════════════════════════════════════════════ */

.help-icon-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 4px;
    min-width: 40px;
    min-height: 40px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: color 0.2s, background 0.2s;
    vertical-align: middle;
    -webkit-tap-highlight-color: transparent;
}

.help-icon-btn:hover,
.help-icon-btn:active {
    color: var(--primary-color);
    background: rgba(0, 212, 255, 0.08);
}

.help-icon-btn:focus-visible {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}

.help-icon-inline {
    opacity: 0.5;
    transition: opacity 0.2s;
}

.help-icon-inline:hover,
.help-icon-inline:active {
    opacity: 1;
}

/* ══════════════════════════════════════════════════════════ */
/* UX Sprint 2: Smart Start Ready Moment                     */
/* ══════════════════════════════════════════════════════════ */

.smart-start-ready {
    color: var(--status-healthy) !important;
    font-weight: 600;
    animation: smartStartFlash 0.4s ease;
}

@keyframes smartStartFlash {
    0% { opacity: 0.5; transform: scale(0.95); }
    50% { opacity: 1; transform: scale(1.05); }
    100% { opacity: 1; transform: scale(1); }
}

/* ══════════════════════════════════════════════════════════ */
/* UX Sprint 2: Empty State Guide                            */
/* ══════════════════════════════════════════════════════════ */

.empty-state-guide {
    padding: var(--spacing-lg, 24px);
    text-align: center;
}

.empty-state-title {
    font-size: var(--font-md, 1rem);
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-md, 16px);
}

.guide-steps {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm, 8px);
    text-align: left;
    margin-bottom: var(--spacing-lg, 24px);
}

.guide-step {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-sm, 8px);
    padding: var(--spacing-sm, 8px);
    background: rgba(0, 212, 255, 0.04);
    border-radius: var(--radius-md, 8px);
}

.guide-step-number {
    width: 28px;
    height: 28px;
    background: var(--primary-color);
    color: var(--bg-primary, #0A1929);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-sm, 0.875rem);
    font-weight: 700;
    flex-shrink: 0;
}

.guide-step-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.guide-step-content strong {
    font-size: var(--font-sm, 0.875rem);
    color: var(--text-primary);
}

.guide-step-content span {
    font-size: var(--font-xs, 0.75rem);
    color: var(--text-muted);
}

.guide-cta-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-sm, 8px) var(--spacing-lg, 24px);
    background: var(--primary-color);
    color: var(--bg-primary, #0A1929);
    border: none;
    border-radius: var(--radius-md, 8px);
    font-size: var(--font-sm, 0.875rem);
    font-weight: 600;
    cursor: pointer;
    min-height: 44px;
    transition: background 0.2s;
}

.guide-cta-btn:hover {
    filter: brightness(0.9);
}

.guide-cta-btn:focus-visible {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}
