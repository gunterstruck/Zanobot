<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0A1929">
    <meta name="description" content="Zanobot - AI Assistant für akustische Maschinenüberwachung">

    <title>Zanobot - AI Assistant</title>

    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png">
    <link rel="apple-touch-icon" href="/icons/icon-512.png">

    <!-- Styles -->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/toast.css">

    <!-- Theme Bootstrap (loads before render) -->
    <script src="/src/theme-bootstrap.js" type="module"></script>
</head>
<body>
    <!-- Microphone Status Badge -->
    <div id="mic-status-badge" class="status-badge" style="display: none;">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
            <line x1="12" y1="19" x2="12" y2="23"></line>
            <line x1="8" y1="23" x2="16" y2="23"></line>
        </svg>
        <span id="mic-status-text">Mikrofon bereit</span>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Hero Header Image -->
        <section class="hero-header">
            <img src="/icons/zanobo_banner_1024x500.png" alt="ZANOBO AI Assistant - AI-powered machine health monitoring through sound analysis" class="hero-image">
        </section>

        <!-- Container 1: Header & Welcome Section (nicht einklappbar) -->
        <section class="main-container">
            <div class="container-content">
                <!-- Header -->
                <div class="header-inline">
                    <div class="logo-section">
                        <div class="logo">
                            <svg width="48" height="48" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <!-- Brain/Head Icon with Sound Waves -->
                                <circle cx="50" cy="45" r="30" stroke="var(--primary-color)" stroke-width="2.5" fill="none"/>
                                <!-- Brain connections -->
                                <circle cx="45" cy="35" r="3" fill="var(--primary-color)"/>
                                <circle cx="55" cy="35" r="3" fill="var(--primary-color)"/>
                                <circle cx="50" cy="45" r="3" fill="var(--primary-color)"/>
                                <circle cx="45" cy="52" r="3" fill="var(--primary-color)"/>
                                <circle cx="55" cy="52" r="3" fill="var(--primary-color)"/>
                                <line x1="45" y1="35" x2="50" y2="45" stroke="var(--primary-color)" stroke-width="1.5"/>
                                <line x1="55" y1="35" x2="50" y2="45" stroke="var(--primary-color)" stroke-width="1.5"/>
                                <line x1="50" y1="45" x2="45" y2="52" stroke="var(--primary-color)" stroke-width="1.5"/>
                                <line x1="50" y1="45" x2="55" y2="52" stroke="var(--primary-color)" stroke-width="1.5"/>
                                <!-- Sound waves -->
                                <path d="M 15 30 Q 12 35 15 40" stroke="var(--primary-color)" stroke-width="2" fill="none"/>
                                <path d="M 10 25 Q 5 35 10 45" stroke="var(--primary-color)" stroke-width="2" fill="none"/>
                                <path d="M 20 35 L 18 38 L 20 41" stroke="var(--primary-color)" stroke-width="2" fill="none"/>
                                <circle cx="25" cy="38" r="1.5" fill="var(--primary-color)"/>
                            </svg>
                        </div>
                        <div class="branding">
                            <h1 class="brand-title">ZANOBO</h1>
                            <p class="brand-subtitle">AI ASSISTANT</p>
                        </div>
                    </div>

                    <!-- Quick Theme Toggle (cycles through themes) -->
                    <button class="theme-switcher" id="quick-theme-toggle" title="Theme wechseln (Neon → Daylight → Zanobot)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                    </button>
                </div>

                <!-- Divider -->
                <div class="header-divider"></div>

                <!-- Welcome Section -->
                <div class="welcome-section-inline">
                    <h2 class="welcome-title">Willkommen, <span id="user-name">Zanobo 123</span></h2>
                    <p class="welcome-subtitle">Maschinenüberwachung</p>
                </div>
            </div>
        </section>

        <!-- Container 2: Maschine auswählen -->
        <section class="main-container collapsible">
            <div class="main-header section-header" data-target="select-machine-content">
                <div class="header-with-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <!-- Professional Machine/Settings Icon -->
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v10M1 12h6m6 0h10"/>
                        <circle cx="12" cy="12" r="9" stroke-width="1.5"/>
                        <path d="M16.24 7.76l-8.48 8.48M7.76 7.76l8.48 8.48" stroke-width="1"/>
                    </svg>
                    <h3 class="container-title">Maschine auswählen</h3>
                </div>
                <svg class="collapse-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"/>
                </svg>
            </div>
            <div id="select-machine-content" class="collapsible-content" style="display: none;">
                <div class="container-content">
                    <!-- Option 1: Scan QR Code -->
                    <div class="machine-selection-option">
                        <div class="option-header">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <!-- Professional QR/Scan Icon -->
                                <rect x="3" y="3" width="8" height="8" rx="1"/>
                                <rect x="13" y="3" width="8" height="8" rx="1"/>
                                <rect x="3" y="13" width="8" height="8" rx="1"/>
                                <rect x="5" y="5" width="4" height="4"/>
                                <rect x="15" y="5" width="4" height="4"/>
                                <rect x="5" y="15" width="4" height="4"/>
                                <path d="M13 13h2v2m0 2h2v2m2-2h2v2"/>
                            </svg>
                            <h5 class="option-title">QR-Code scannen</h5>
                        </div>
                        <p class="option-description">Identifiziere Maschine via QR-Code</p>
                        <button class="action-btn secondary-btn" id="scan-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <!-- Professional Camera/Scan Icon -->
                                <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                                <circle cx="12" cy="13" r="4"/>
                            </svg>
                            Scannen
                        </button>
                    </div>

                    <div class="option-divider">
                        <span>oder</span>
                    </div>

                    <!-- Option 2: Manual Entry -->
                    <div class="machine-selection-option">
                        <div class="option-header">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <!-- Professional Edit/Create Icon -->
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                            </svg>
                            <h5 class="option-title">Manuell anlegen</h5>
                        </div>
                        <p class="option-description">Neue Maschine mit Namen erstellen</p>
                        <div class="input-group">
                            <label for="machine-name-input">Maschinenname</label>
                            <input type="text" id="machine-name-input" class="machine-input" placeholder="z.B. Zanobo 123" />
                        </div>
                        <div class="input-group">
                            <label for="machine-id-input">Maschinen-ID (optional)</label>
                            <input type="text" id="machine-id-input" class="machine-input" placeholder="z.B. 1GB4-636A0-Ba1" />
                        </div>
                        <button class="action-btn" id="create-machine-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <!-- Professional Save Icon -->
                                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                                <polyline points="17 21 17 13 7 13 7 21"/>
                                <polyline points="7 3 7 8 15 8"/>
                            </svg>
                            Speichern
                        </button>
                    </div>

                    <!-- Quick Select: Recently Used Machines -->
                    <div id="quick-select-section" class="machine-selection-option" style="display: none;">
                        <div class="option-divider">
                            <span>Schnellwahl</span>
                        </div>
                        <div class="option-header">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <!-- Professional History/Clock Icon -->
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                            <h5 class="option-title">Zuletzt verwendet</h5>
                        </div>
                        <p class="option-description">Schneller Zugriff auf kürzlich verwendete Maschinen</p>
                        <div id="quick-select-list" class="quick-select-list">
                            <!-- Machine buttons will be added dynamically -->
                        </div>
                    </div>

                    <!-- Hardware Intelligence Card -->
                    <div class="hardware-info-card">
                        <div class="hardware-header">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="9" y="2" width="6" height="12" rx="3"/>
                                <path d="M5 10v2a7 7 0 0 0 14 0v-2"/>
                                <line x1="12" y1="19" x2="12" y2="22"/>
                                <line x1="8" y1="22" x2="16" y2="22"/>
                            </svg>
                            <h5 class="hardware-title">Audio Hardware</h5>
                        </div>
                        <div class="hardware-content">
                            <div class="hardware-status">
                                <div id="hardware-status-icon" class="hardware-icon">
                                    <!-- Icon will be set dynamically -->
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <path d="M12 6v6l4 2"/>
                                    </svg>
                                </div>
                                <div class="hardware-info">
                                    <div id="hardware-device-label" class="hardware-device">Erkenne Mikrofon...</div>
                                    <div id="hardware-status-text" class="hardware-message">Initialisiere Hardware-Check</div>
                                </div>
                            </div>
                            <button class="action-btn secondary-btn" id="change-microphone-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="3"/>
                                    <path d="M12 1v6m0 6v10M1 12h6m6 0h10"/>
                                </svg>
                                Anderes Mikrofon wählen
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Container 3: Referenz aufnehmen -->
        <section class="main-container collapsible">
            <div class="main-header section-header" data-target="record-reference-content">
                <div class="header-with-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <!-- Professional Microphone Icon -->
                        <rect x="9" y="2" width="6" height="12" rx="3"/>
                        <path d="M5 10v2a7 7 0 0 0 14 0v-2"/>
                        <line x1="12" y1="19" x2="12" y2="22"/>
                        <line x1="8" y1="22" x2="16" y2="22"/>
                    </svg>
                    <h3 class="container-title">Referenz aufnehmen</h3>
                </div>
                <svg class="collapse-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"/>
                </svg>
            </div>
            <div id="record-reference-content" class="collapsible-content" style="display: none;">
                <div class="container-content">
                    <p class="sub-description">10-Sekunden Referenzaufnahme</p>
                    <button class="action-btn" id="record-btn">Aufnehmen</button>
                </div>
            </div>
        </section>

        <!-- Container 4: Diagnose starten -->
        <section class="main-container collapsible">
            <div class="main-header section-header" data-target="run-diagnosis-content">
                <div class="header-with-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <!-- Professional Diagnosis/Chart Icon -->
                        <path d="M3 3v18h18"/>
                        <path d="M18 17l-5-5-4 4-6-6"/>
                        <circle cx="18" cy="12" r="2" fill="var(--primary-color)"/>
                        <circle cx="13" cy="17" r="1.5" fill="var(--primary-color)"/>
                        <circle cx="9" cy="21" r="1.5" fill="var(--primary-color)"/>
                        <circle cx="3" cy="15" r="1.5" fill="var(--primary-color)"/>
                    </svg>
                    <h3 class="container-title">Diagnose starten</h3>
                </div>
                <svg class="collapse-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"/>
                </svg>
            </div>
            <div id="run-diagnosis-content" class="collapsible-content" style="display: none;">
                <div class="container-content">
                    <p class="sub-description">Live-Analyse durchführen</p>
                    <button class="action-btn" id="diagnose-btn">Analysieren</button>
                </div>
            </div>
        </section>

        <!-- Container 5: Maschinenübersicht -->
        <section class="main-container collapsible">
            <div class="main-header section-header" data-target="machine-overview">
                <h3 class="container-title">Maschinenübersicht</h3>
                <svg class="collapse-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"/>
                </svg>
            </div>
            <div id="machine-overview" class="collapsible-content" style="display: none;">
                <div class="container-content">
                    <div class="machine-list">
                        <!-- Example Machine Items -->
                        <div class="machine-item">
                            <div class="machine-info">
                                <h4 class="machine-name">Zanobo 123</h4>
                                <p class="machine-status status-healthy">Healthy</p>
                                <p class="machine-time">Letzte Prüfung vor 3min</p>
                            </div>
                            <svg class="chevron-right" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 18 15 12 9 6"/>
                            </svg>
                        </div>
                        <div class="machine-item">
                            <div class="machine-info">
                                <h4 class="machine-name">Zanobo 9</h4>
                                <p class="machine-status status-uncertain">Uncertain</p>
                                <p class="machine-time">Letzte Prüfung vor 12min</p>
                            </div>
                            <svg class="chevron-right" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 18 15 12 9 6"/>
                            </svg>
                        </div>
                        <button class="add-reference-btn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"/>
                                <line x1="5" y1="12" x2="19" y2="12"/>
                            </svg>
                            Neue Referenz
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Container 6: Historie -->
        <section class="main-container collapsible">
            <div class="main-header section-header" data-target="history">
                <h3 class="container-title">Historie</h3>
                <svg class="collapse-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"/>
                </svg>
            </div>
            <div id="history" class="collapsible-content" style="display: none;">
                <div class="container-content">
                    <div class="history-list">
                        <p class="empty-state">Noch keine Messungen vorhanden</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Container 7: Einstellungen -->
        <section class="main-container collapsible">
            <div class="main-header section-header" data-target="settings">
                <h3 class="container-title">Einstellungen</h3>
                <svg class="collapse-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"/>
                </svg>
            </div>
            <div id="settings" class="collapsible-content" style="display: none;">
                <div class="container-content">
                    <div class="settings-list">
                        <!-- Theme Selection Section -->
                        <div class="setting-category">
                            <h4 class="setting-category-title">Erscheinungsbild</h4>
                            <div class="theme-cards" id="theme-cards">
                                <!-- Theme Card: Neon Industrial -->
                                <div class="theme-card" data-theme="neon">
                                    <div class="theme-card-icon">
                                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                                            <circle cx="12" cy="12" r="1" fill="currentColor"/>
                                        </svg>
                                    </div>
                                    <div class="theme-card-content">
                                        <h5 class="theme-card-title">Neon Industrial</h5>
                                        <p class="theme-card-description">Cyberpunk-Style mit Neon Cyan & Orange. Perfekt für dunkle Umgebungen.</p>
                                    </div>
                                    <div class="theme-card-colors">
                                        <span class="theme-color-dot" style="background: #00f3ff;"></span>
                                        <span class="theme-color-dot" style="background: #ff8800;"></span>
                                        <span class="theme-color-dot" style="background: #0f172a;"></span>
                                    </div>
                                </div>

                                <!-- Theme Card: Daylight -->
                                <div class="theme-card" data-theme="light">
                                    <div class="theme-card-icon">
                                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="5"/>
                                            <line x1="12" y1="1" x2="12" y2="3"/>
                                            <line x1="12" y1="21" x2="12" y2="23"/>
                                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                                            <line x1="1" y1="12" x2="3" y2="12"/>
                                            <line x1="21" y1="12" x2="23" y2="12"/>
                                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                                        </svg>
                                    </div>
                                    <div class="theme-card-content">
                                        <h5 class="theme-card-title">Daylight</h5>
                                        <p class="theme-card-description">Heller High-Contrast-Modus. Optimal für Sonnenlicht & Outdoor.</p>
                                    </div>
                                    <div class="theme-card-colors">
                                        <span class="theme-color-dot" style="background: #0f172a;"></span>
                                        <span class="theme-color-dot" style="background: #ea580c;"></span>
                                        <span class="theme-color-dot" style="background: #ffffff; border: 1px solid #e5e7eb;"></span>
                                    </div>
                                </div>

                                <!-- Theme Card: Brand -->
                                <div class="theme-card" data-theme="brand">
                                    <div class="theme-card-icon">
                                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="9"/>
                                            <circle cx="12" cy="12" r="3"/>
                                            <path d="M12 1v6m0 6v10M1 12h6m6 0h10"/>
                                        </svg>
                                    </div>
                                    <div class="theme-card-content">
                                        <h5 class="theme-card-title">Zanobot</h5>
                                        <p class="theme-card-description">Original Zanobot Design. Ausgewogen & professionell.</p>
                                    </div>
                                    <div class="theme-card-colors">
                                        <span class="theme-color-dot" style="background: #00D4FF;"></span>
                                        <span class="theme-color-dot" style="background: #00FFC6;"></span>
                                        <span class="theme-color-dot" style="background: #0A1929;"></span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Divider -->
                        <div class="settings-divider"></div>

                        <!-- Audio Settings -->
                        <div class="setting-category">
                            <h4 class="setting-category-title">Audioeinstellungen</h4>
                            <div class="setting-item">
                                <label for="confidence-threshold">Vertrauensschwelle</label>
                                <input type="range" id="confidence-threshold" min="0" max="100" value="75">
                                <span id="confidence-value">75%</span>
                            </div>
                            <div class="setting-item">
                                <label for="recording-duration">Aufnahmedauer</label>
                                <select id="recording-duration">
                                    <option value="5">5 Sekunden</option>
                                    <option value="10" selected>10 Sekunden</option>
                                    <option value="15">15 Sekunden</option>
                                </select>
                            </div>
                        </div>

                        <!-- Divider -->
                        <div class="settings-divider"></div>

                        <!-- Database Management -->
                        <div class="setting-category">
                            <h4 class="setting-category-title">Datenverwaltung</h4>
                            <div class="setting-item">
                                <button class="action-btn secondary-btn" id="export-data-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="7 10 12 15 17 10"/>
                                        <line x1="12" y1="15" x2="12" y2="3"/>
                                    </svg>
                                    Datenbank exportieren
                                </button>
                            </div>
                            <div class="setting-item">
                                <button class="action-btn secondary-btn" id="import-data-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="17 8 12 3 7 8"/>
                                        <line x1="12" y1="3" x2="12" y2="15"/>
                                    </svg>
                                    Datenbank importieren
                                </button>
                            </div>
                            <div class="setting-item">
                                <p class="setting-stats">
                                    <strong>Statistik:</strong>
                                    <span id="stats-machines">0</span> Maschinen,
                                    <span id="stats-recordings">0</span> Aufnahmen,
                                    <span id="stats-diagnoses">0</span> Diagnosen
                                </p>
                            </div>
                            <div class="setting-item">
                                <button class="action-btn secondary-btn" id="clear-data-btn" style="border-color: var(--status-error); color: var(--status-error);">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="3 6 5 6 21 6"/>
                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                    </svg>
                                    Alle Daten löschen
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer / Legal Info -->
        <footer class="footer">
            <div class="legal-info">
                <button class="footer-link" id="impressum-btn">Impressum</button>
                <span class="separator">•</span>
                <button class="footer-link" id="datenschutz-btn">Datenschutz</button>
                <span class="separator">•</span>
                <button class="footer-link" id="about-btn">Über Zanobot</button>
            </div>
            <p class="copyright">© 2025 Zanobot AI Assistant</p>
        </footer>
    </div>

    <!-- Modal for Recording -->
    <div id="recording-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Referenz aufnehmen</h3>
                <p class="modal-subtitle" id="machine-id">MACHINE 002</p>
            </div>
            <div class="modal-body">
                <canvas id="waveform-canvas" width="300" height="150"></canvas>
                <canvas id="health-gauge-canvas" width="300" height="300" style="display: none;"></canvas>
                <p class="recording-status" id="recording-status">High audio quality detected</p>
                <p class="recording-timer" id="recording-timer">00:00</p>
                <div class="fingerprint-quality">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"/>
                    </svg>
                    <span>Fingerprint Quality: <strong id="fingerprint-quality">CONFIDENT</strong></span>
                </div>
            </div>
            <div class="modal-actions">
                <button class="modal-btn btn-secondary" id="stop-recording-btn">Stop Recording</button>
                <button class="modal-btn btn-primary" id="save-reference-btn" style="display: none;">Save Reference</button>
            </div>
        </div>
    </div>

    <!-- Modal for Review Recording (Phase 2) -->
    <div id="review-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Aufnahme prüfen</h3>
                <p class="modal-subtitle">Qualitätskontrolle</p>
            </div>
            <div class="modal-body">
                <!-- Audio Player -->
                <div class="review-audio-player">
                    <h4 class="review-section-title">Aufnahme anhören</h4>
                    <audio id="review-audio" controls style="width: 100%; margin-bottom: 20px;">
                        <source id="review-audio-source" type="audio/webm">
                        Ihr Browser unterstützt keine Audio-Wiedergabe.
                    </audio>
                    <p class="review-info">15 Sekunden Aufnahme (5s Stabilisierung + 10s Training)</p>
                </div>

                <!-- Quality Assessment -->
                <div class="review-quality">
                    <h4 class="review-section-title">Qualitätsbewertung</h4>

                    <!-- Quality Traffic Light -->
                    <div class="quality-indicator" id="quality-indicator">
                        <div class="quality-icon" id="quality-icon">
                            <!-- Icon will be set dynamically -->
                        </div>
                        <div class="quality-details">
                            <p class="quality-score">
                                Qualität: <strong id="quality-score">--</strong>%
                            </p>
                            <p class="quality-rating" id="quality-rating-text">
                                <!-- Rating text will be set dynamically -->
                            </p>
                        </div>
                    </div>

                    <!-- Quality Issues (if any) -->
                    <div class="quality-issues" id="quality-issues" style="display: none;">
                        <h5>Erkannte Probleme:</h5>
                        <ul id="quality-issues-list">
                            <!-- Issues will be added dynamically -->
                        </ul>
                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <button class="modal-btn btn-secondary" id="review-discard-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6"/>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                    </svg>
                    Verwerfen / Neu
                </button>
                <button class="modal-btn btn-primary" id="review-save-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                        <polyline points="17 21 17 13 7 13 7 21"/>
                        <polyline points="7 3 7 8 15 8"/>
                    </svg>
                    Als Referenz speichern
                </button>
            </div>
        </div>
    </div>

    <!-- Modal for QR/Barcode Scanner -->
    <div id="scanner-modal" class="modal" style="display: none;">
        <div class="modal-content scanner-modal-content">
            <div class="modal-header">
                <h3>Maschine scannen</h3>
                <button class="close-modal-btn" id="close-scanner-modal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <!-- Scanner Container -->
                <div id="scanner-container" class="scanner-container">
                    <div id="qr-reader" class="qr-reader"></div>
                    <div class="scanner-overlay">
                        <div class="scanner-frame">
                            <div class="scanner-corner corner-tl"></div>
                            <div class="scanner-corner corner-tr"></div>
                            <div class="scanner-corner corner-bl"></div>
                            <div class="scanner-corner corner-br"></div>
                        </div>
                        <p class="scanner-hint">QR-Code oder Barcode in den Rahmen halten</p>
                    </div>
                </div>

                <!-- Error/Permission Message -->
                <div id="scanner-error" class="scanner-error" style="display: none;">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--status-error)" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="8" x2="12" y2="12"/>
                        <line x1="12" y1="16" x2="12.01" y2="16"/>
                    </svg>
                    <p id="scanner-error-message">Kamerazugriff wurde verweigert</p>
                    <p class="scanner-error-hint">Bitte erlauben Sie den Kamerazugriff in Ihren Browser-Einstellungen</p>
                </div>

                <!-- Success Message -->
                <div id="scanner-success" class="scanner-success" style="display: none;">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="var(--status-healthy)" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                        <polyline points="22 4 12 14.01 9 11.01"/>
                    </svg>
                    <p id="scanner-success-message">Code erkannt!</p>
                </div>
            </div>
            <div class="modal-actions">
                <button class="modal-btn btn-secondary" id="manual-input-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                    </svg>
                    Manuell eingeben
                </button>
            </div>
        </div>
    </div>

    <!-- Manual Machine ID Modal -->
    <div id="manual-input-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Maschinen-ID eingeben</h3>
                <button class="close-modal-btn" id="close-manual-input-modal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <label for="manual-machine-id-input">Maschinen-ID</label>
                <input
                    type="text"
                    id="manual-machine-id-input"
                    class="machine-input"
                    placeholder="z.B. 1GB4-636A0-Ba1"
                />
            </div>
            <div class="modal-actions">
                <button class="modal-btn btn-secondary" id="manual-input-cancel">Abbrechen</button>
                <button class="modal-btn btn-primary" id="manual-input-confirm">Weiter</button>
            </div>
        </div>
    </div>

    <!-- Modal for Diagnosis Results -->
    <div id="diagnosis-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Diagnoseergebnisse</h3>
                <button class="close-modal-btn" id="close-diagnosis-modal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="result-card">
                    <div class="result-barcode">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                            <rect x="3" y="6" width="2" height="12"/>
                            <rect x="6" y="6" width="1" height="12"/>
                            <rect x="8" y="6" width="2" height="12"/>
                            <rect x="11" y="6" width="1" height="12"/>
                            <rect x="13" y="6" width="3" height="12"/>
                            <rect x="17" y="6" width="1" height="12"/>
                            <rect x="19" y="6" width="2" height="12"/>
                        </svg>
                        <span id="machine-barcode">1GB4-636A0-Ba1</span>
                    </div>
                    <div class="result-fingerprint">
                        <h4>Fingerprint</h4>
                        <p class="result-status status-healthy" id="result-status">HEALTHY</p>
                        <p class="result-confidence"><span id="result-confidence">87</span>% Confidence score</p>
                    </div>
                    <div class="result-analysis">
                        <h4>Variance</h4>
                        <p class="analysis-label">Frequency anomaly</p>
                        <canvas id="analysis-canvas" width="300" height="100"></canvas>
                        <p class="analysis-hint" id="analysis-hint">Hint: Slightly increased signal around 20 kHz</p>
                    </div>
                    <div class="result-quality">
                        <h4>Reference Quality</h4>
                        <p class="quality-status status-good">GOOD</p>
                        <p class="quality-description">Reference recording meets recommended conditions</p>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="modal-btn btn-secondary" id="view-history-btn">View History</button>
            </div>
        </div>
    </div>

    <!-- Modal for Microphone Selection -->
    <div id="microphone-selection-modal" class="modal" style="display: none;">
        <div class="modal-content microphone-modal-content">
            <div class="modal-header">
                <h3>Mikrofon auswählen</h3>
                <button class="close-modal-btn" id="close-microphone-modal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p class="modal-description">
                    Wählen Sie das beste Mikrofon für die Maschinendiagnose.
                    Vermeiden Sie Headsets und Bluetooth-Geräte, da diese für Sprache optimiert sind.
                </p>
                <div id="microphone-device-list" class="microphone-device-list">
                    <!-- Device items will be added dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="./src/main.ts" type="module"></script>
</body>
</html>
